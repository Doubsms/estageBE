import{r as c,g as D,b as P,c as U,_ as V,d as u,j as r,s as Z,e as N,f as s,h as A,av as H,l as W,u as _,B,z as L,I as O,T as j,L as F,D as Y}from"./index-zHPv1lze.js";import{a as X}from"./index-C3O71W1x.js";import{B as q,a as J}from"./ButtonGroupButtonContext-BYVHV5Ft.js";function K(t){return c.Children.toArray(t).filter(o=>c.isValidElement(o))}function Q(t){return P("MuiButtonGroup",t)}const i=D("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),S=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],w=(t,o)=>{const{ownerState:e}=t;return[{[`& .${i.grouped}`]:o.grouped},{[`& .${i.grouped}`]:o[`grouped${s(e.orientation)}`]},{[`& .${i.grouped}`]:o[`grouped${s(e.variant)}`]},{[`& .${i.grouped}`]:o[`grouped${s(e.variant)}${s(e.orientation)}`]},{[`& .${i.grouped}`]:o[`grouped${s(e.variant)}${s(e.color)}`]},{[`& .${i.firstButton}`]:o.firstButton},{[`& .${i.lastButton}`]:o.lastButton},{[`& .${i.middleButton}`]:o.middleButton},o.root,o[e.variant],e.disableElevation===!0&&o.disableElevation,e.fullWidth&&o.fullWidth,e.orientation==="vertical"&&o.vertical]},oo=t=>{const{classes:o,color:e,disabled:p,disableElevation:g,fullWidth:x,orientation:n,variant:d}=t,v={root:["root",d,n==="vertical"&&"vertical",x&&"fullWidth",g&&"disableElevation"],grouped:["grouped",`grouped${s(n)}`,`grouped${s(d)}`,`grouped${s(d)}${s(n)}`,`grouped${s(d)}${s(e)}`,p&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return A(v,Q,o)},to=Z("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:w})(({theme:t,ownerState:o})=>u({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},o.variant==="contained"&&{boxShadow:(t.vars||t).shadows[2]},o.disableElevation&&{boxShadow:"none"},o.fullWidth&&{width:"100%"},o.orientation==="vertical"&&{flexDirection:"column"},{[`& .${i.grouped}`]:u({minWidth:40,"&:hover":u({},o.variant==="contained"&&{boxShadow:"none"})},o.variant==="contained"&&{boxShadow:"none"}),[`& .${i.firstButton},& .${i.middleButton}`]:u({},o.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},o.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},o.variant==="text"&&o.orientation==="horizontal"&&{borderRight:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${i.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},o.variant==="text"&&o.orientation==="vertical"&&{borderBottom:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${i.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},o.variant==="text"&&o.color!=="inherit"&&{borderColor:t.vars?`rgba(${t.vars.palette[o.color].mainChannel} / 0.5)`:H.alpha(t.palette[o.color].main,.5)},o.variant==="outlined"&&o.orientation==="horizontal"&&{borderRightColor:"transparent"},o.variant==="outlined"&&o.orientation==="vertical"&&{borderBottomColor:"transparent"},o.variant==="contained"&&o.orientation==="horizontal"&&{borderRight:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${i.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},o.variant==="contained"&&o.orientation==="vertical"&&{borderBottom:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${i.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},o.variant==="contained"&&o.color!=="inherit"&&{borderColor:(t.vars||t).palette[o.color].dark},{"&:hover":u({},o.variant==="outlined"&&o.orientation==="horizontal"&&{borderRightColor:"currentColor"},o.variant==="outlined"&&o.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${i.lastButton},& .${i.middleButton}`]:u({},o.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},o.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},o.variant==="outlined"&&o.orientation==="horizontal"&&{marginLeft:-1},o.variant==="outlined"&&o.orientation==="vertical"&&{marginTop:-1})})),ro=c.forwardRef(function(o,e){const p=U({props:o,name:"MuiButtonGroup"}),{children:g,className:x,color:n="primary",component:d="div",disabled:v=!1,disableElevation:$=!1,disableFocusRipple:b=!1,disableRipple:a=!1,fullWidth:l=!1,orientation:h="horizontal",size:m="medium",variant:z="outlined"}=p,I=V(p,S),y=u({},p,{color:n,component:d,disabled:v,disableElevation:$,disableFocusRipple:b,disableRipple:a,fullWidth:l,orientation:h,size:m,variant:z}),f=oo(y),k=c.useMemo(()=>({className:f.grouped,color:n,disabled:v,disableElevation:$,disableFocusRipple:b,disableRipple:a,fullWidth:l,size:m,variant:z}),[n,v,$,b,a,l,m,z,f.grouped]),T=K(g),M=T.length,G=R=>{const C=R===0,E=R===M-1;return C&&E?"":C?f.firstButton:E?f.lastButton:f.middleButton};return r.jsx(to,u({as:d,role:"group",className:N(f.root,x),ref:e,ownerState:y},I,{children:r.jsx(q.Provider,{value:k,children:T.map((R,C)=>r.jsx(J.Provider,{value:G(C),children:R},C))})}))}),io=W([r.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"},"0"),r.jsx("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"},"1")],"ZoomIn"),eo=W(r.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14M7 9h5v1H7z"}),"ZoomOut"),so=()=>{const[t,o]=c.useState(null),[e,p]=c.useState(!0),[g,x]=c.useState(1),n=_(),d="",v=()=>x(a=>Math.min(2,a+.1)),$=()=>x(a=>Math.max(.5,a-.1));c.useEffect(()=>{(async()=>{try{const l=localStorage.getItem("token"),h=await X.get(`${d}/organigramme`,{headers:{Authorization:`Bearer ${l}`}});o(h.data)}catch(l){console.error("Erreur:",l)}finally{p(!1)}})()},[]);const b=({node:a,depth:l=0})=>r.jsxs(B,{sx:{display:"flex",flexDirection:"column",alignItems:"center",position:"relative",m:2,flexShrink:0,transform:`scale(${g})`,transition:"transform 0.3s ease"},children:[l>0&&r.jsx(Y,{orientation:"vertical",sx:{height:40,borderRightWidth:3,borderColor:n.palette.text.secondary,position:"absolute",top:-40}}),r.jsxs(L,{elevation:l===0?6:3,sx:{p:2,border:2,borderColor:n.palette.primary.main,borderRadius:2,minWidth:200,position:"relative",bgcolor:"background.paper",zIndex:1,transition:"transform 0.2s","&:hover":{transform:"translateY(-2px)"}},children:[r.jsx(j,{variant:l===0?"h6":"subtitle1",fontWeight:"bold",children:a.ABBREVIATION}),r.jsx(j,{variant:"caption",color:"text.secondary",children:a.NOMSTRUCTURE})]}),a.children?.length>0&&r.jsx(B,{sx:{position:"relative",mt:4,"&::before":{content:'""',position:"absolute",top:-20,left:"50%",height:20,borderLeft:`3px solid ${n.palette.text.secondary}`}},children:r.jsx(B,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",position:"relative",width:"max-content",mx:"auto"},children:a.children.map((h,m)=>r.jsx(B,{sx:{position:"relative","&::before":{content:'""',position:"absolute",top:-22,left:m===0?"50%":"0%",right:m===a.children.length-1?"50%":"0%",borderTop:`3px solid ${n.palette.text.secondary}`}},children:r.jsx(b,{node:h,depth:l+1})},h.IDSTRUCTURE))})})]});return r.jsxs(B,{sx:{height:"90vh",p:4,bgcolor:"background.default",overflowX:"auto",overflowY:"hidden",position:"relative"},children:[r.jsx(L,{sx:{position:"fixed",bottom:20,right:20,zIndex:1e3,borderRadius:4,boxShadow:3},children:r.jsxs(ro,{orientation:"vertical",children:[r.jsx(O,{onClick:v,disabled:g>=2,"aria-label":"Zoom avant",children:r.jsx(io,{})}),r.jsx(O,{onClick:$,disabled:g<=.5,"aria-label":"Zoom arrière",children:r.jsx(eo,{})})]})}),r.jsx(j,{variant:"h4",sx:{mb:4,fontWeight:700,color:"primary.main",textAlign:"center",position:"sticky",left:0,bgcolor:"background.default",zIndex:2,py:2},children:"Organigramme Direction Générale du Budget"}),e?r.jsx(F,{sx:{width:"50%",mx:"auto"}}):t?r.jsx(B,{sx:{display:"inline-flex",minWidth:"fit-content",justifyContent:"center",position:"relative",pb:4,transformOrigin:"50% 50%"},children:r.jsx(b,{node:t})}):r.jsx(j,{color:"error",textAlign:"center",children:"Aucune donnée disponible"})]})};export{so as default};
