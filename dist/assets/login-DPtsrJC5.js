import{E as B,j as e,S as c,Z as j,bq as L,H as M,G as t,I as V,T as C,br as D,D as E,Y as p,P as T}from"./index-zHPv1lze.js";import{F as A,c as N,E as P,a as W,b as f,A as Z}from"./EyeInvisibleOutlined-BitrtgPg.js";import{B as m}from"./Button-0T1tR8_c.js";import{I as b,O as v}from"./OutlinedInput-C5vYvqQm.js";import{F as g}from"./FormHelperText-BXMwkblB.js";import{I as z}from"./InputAdornment-BgDE6Kz5.js";import{F as G}from"./FormControlLabel-D_GYa5-T.js";import{C as O}from"./Checkbox-BNRiEFgI.js";import"./Container-iQUVt9w4.js";import"./Link-DAa9g2LX.js";import"./ButtonGroupButtonContext-BYVHV5Ft.js";import"./useFormControl-BwsGWz84.js";import"./SwitchBase-CEgujy3G.js";const q="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15.6871%206.53113H15.083V6.5H8.33301V9.5H12.5716C11.9533%2011.2464%2010.2916%2012.5%208.33301%2012.5C5.84788%2012.5%203.83301%2010.4851%203.83301%208C3.83301%205.51487%205.84788%203.5%208.33301%203.5C9.48013%203.5%2010.5238%203.93275%2011.3184%204.63962L13.4398%202.51825C12.1003%201.26987%2010.3085%200.5%208.33301%200.5C4.19113%200.5%200.833008%203.85812%200.833008%208C0.833008%2012.1419%204.19113%2015.5%208.33301%2015.5C12.4749%2015.5%2015.833%2012.1419%2015.833%208C15.833%207.49713%2015.7813%207.00625%2015.6871%206.53113Z'%20fill='%23FFC107'/%3e%3cpath%20d='M1.69824%204.50913L4.16237%206.31625C4.82912%204.6655%206.44387%203.5%208.33349%203.5C9.48062%203.5%2010.5242%203.93275%2011.3189%204.63963L13.4402%202.51825C12.1007%201.26988%2010.309%200.5%208.33349%200.5C5.45274%200.5%202.95449%202.12638%201.69824%204.50913Z'%20fill='%23FF3D00'/%3e%3cpath%20d='M8.33312%2015.5C10.2704%2015.5%2012.0306%2014.7586%2013.3615%2013.553L11.0402%2011.5888C10.2872%2012.1591%209.35125%2012.5%208.33312%2012.5C6.38237%2012.5%204.726%2011.2561%204.102%209.52026L1.65625%2011.4046C2.8975%2013.8335%205.41825%2015.5%208.33312%2015.5Z'%20fill='%234CAF50'/%3e%3cpath%20d='M15.6871%206.53113H15.083V6.5H8.33301V9.5H12.5716C12.2746%2010.3389%2011.735%2011.0622%2011.039%2011.5891C11.0394%2011.5887%2011.0398%2011.5887%2011.0401%2011.5884L13.3614%2013.5526C13.1971%2013.7019%2015.833%2011.75%2015.833%208C15.833%207.49713%2015.7813%207.00625%2015.6871%206.53113Z'%20fill='%231976D2'/%3e%3c/svg%3e",R="data:image/svg+xml,%3csvg%20width='16'%20height='13'%20viewBox='0%200%2016%2013'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15.5%201.42863C14.9488%201.67278%2014.3559%201.83568%2013.7306%201.91276C14.3663%201.53529%2014.8555%200.933256%2015.085%200.222065C14.4901%200.570786%2013.831%200.827014%2013.1298%200.962003C12.5698%200.368303%2011.7711%200%2010.8862%200C9.18636%200%207.80856%201.36572%207.80856%203.04975C7.80856%203.28806%207.83647%203.52012%207.88897%203.74552C5.33168%203.6172%203.06354%202.40147%201.54616%200.55662C1.27952%201.00742%201.12953%201.53529%201.12953%202.09233C1.12953%203.15099%201.67157%204.08299%202.49817%204.63211C1.99363%204.6167%201.51866%204.47629%201.10287%204.25131C1.10287%204.26048%201.10287%204.27423%201.10287%204.28714C1.10287%205.7666%202.16403%206.99858%203.57058%207.27898C3.31352%207.34939%203.04187%207.38855%202.76189%207.38855C2.56316%207.38855%202.36943%207.36605%202.18194%207.33231C2.57358%208.54137%203.70973%209.42505%205.05587%209.4513C4.00262%2010.2679%202.67607%2010.757%201.23369%2010.757C0.984543%2010.757%200.740813%2010.7429%200.5%2010.7137C1.8628%2011.5765%203.481%2012.0823%205.21794%2012.0823C10.8779%2012.0823%2013.9743%207.43438%2013.9743%203.40222C13.9743%203.27014%2013.9701%203.13849%2013.9639%203.0085C14.568%202.58187%2015.0888%202.04358%2015.5%201.42863Z'%20fill='%2303A9F4'/%3e%3c/svg%3e",U="data:image/svg+xml,%3csvg%20width='9'%20height='16'%20viewBox='0%200%209%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.04102%200.125034C3.96989%200.125034%202.29102%201.80391%202.29102%203.87503V5.75003H0.0410156V8.75003H2.29102V15.875H5.29102V8.75003H7.91602L8.29102%205.75003H5.29102V4.25003C5.29102%203.42166%205.96264%202.75003%206.79102%202.75003H8.29102V0.245784C7.57514%200.171909%206.76139%200.123534%206.04102%200.125034Z'%20fill='%234267B2'/%3e%3c/svg%3e";function $(){const n=B(x=>x.breakpoints.down("sm")),u=async()=>{},h=async()=>{},a=async()=>{};return e.jsxs(c,{direction:"row",spacing:{xs:1,sm:2},justifyContent:{xs:"space-around",sm:"space-between"},sx:{"& .MuiButton-startIcon":{mr:{xs:0,sm:1},ml:{xs:0,sm:-.5}}},children:[e.jsx(m,{variant:"outlined",color:"secondary",fullWidth:!n,startIcon:e.jsx("img",{src:q,alt:"Google"}),onClick:u,children:!n&&"Google"}),e.jsx(m,{variant:"outlined",color:"secondary",fullWidth:!n,startIcon:e.jsx("img",{src:R,alt:"Twitter"}),onClick:h,children:!n&&"Twitter"}),e.jsx(m,{variant:"outlined",color:"secondary",fullWidth:!n,startIcon:e.jsx("img",{src:U,alt:"Facebook"}),onClick:a,children:!n&&"Facebook"})]})}function y({isDemo:n=!1}){const[u,h]=j.useState(!1),[a,x]=j.useState(!1),k=L(),F=()=>{x(!a)},S=s=>{s.preventDefault()},I=async(s,{setSubmitting:d,setErrors:i})=>{try{const r=await fetch("/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nomUtilisateur:s.username,password:s.password})});if(!r.ok){const l=await r.json();i({submit:l.error||"Erreur lors de la connexion"}),p.error(l.error||"Erreur lors de la connexion");return}const o=await r.json();localStorage.setItem("token",o.token),localStorage.setItem("Nom",o.nom),localStorage.setItem("Fonction",o.fonction),console.log("Token sauvegardé :",o.token,"Nom : ",localStorage.getItem("Nom"),"Fonction: ",o.fonction),p.success("Connexion réussie !",{autoClose:2e3,onClose:()=>{k("/dashboard/default")}})}catch{i({submit:"Erreur de connexion, veuillez réessayer."}),p.error("Erreur de connexion, veuillez réessayer.")}finally{d(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(M,{}),e.jsx(A,{initialValues:{username:"",password:"",submit:null},validationSchema:N().shape({username:f().required("Nom d'utilisateur requis"),password:f().max(255).required("Mot de passe requis")}),onSubmit:I,children:({errors:s,handleBlur:d,handleChange:i,handleSubmit:w,isSubmitting:r,touched:o,values:l})=>e.jsx("form",{noValidate:!0,onSubmit:w,children:e.jsxs(t,{container:!0,spacing:3,children:[e.jsxs(t,{item:!0,xs:12,children:[e.jsxs(c,{spacing:1,children:[e.jsx(b,{htmlFor:"email-login",children:"Nom d'utilisateur"}),e.jsx(v,{id:"email-login",value:l.username,name:"username",onBlur:d,onChange:i,placeholder:"Entrez le nom d'utilisateur",fullWidth:!0,error:!!(o.username&&s.username)})]}),o.username&&s.username&&e.jsx(g,{error:!0,id:"standard-weight-helper-text-email-login",children:s.username})]}),e.jsxs(t,{item:!0,xs:12,children:[e.jsxs(c,{spacing:1,children:[e.jsx(b,{htmlFor:"password-login",children:"Mot de passe"}),e.jsx(v,{fullWidth:!0,error:!!(o.password&&s.password),id:"password-login",type:a?"text":"password",value:l.password,name:"password",onBlur:d,onChange:i,endAdornment:e.jsx(z,{position:"end",children:e.jsx(V,{"aria-label":"toggle password visibility",onClick:F,onMouseDown:S,edge:"end",color:"secondary",children:a?e.jsx(P,{}):e.jsx(W,{})})}),placeholder:"Entrez le mot de passe"})]}),o.password&&s.password&&e.jsx(g,{error:!0,id:"standard-weight-helper-text-password-login",children:s.password})]}),e.jsx(t,{item:!0,xs:12,sx:{mt:-1},children:e.jsx(c,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:e.jsx(G,{control:e.jsx(O,{checked:u,onChange:H=>h(H.target.checked),name:"checked",color:"primary",size:"small"}),label:e.jsx(C,{variant:"h6",children:"Rester connecté"})})})}),s.submit&&e.jsx(t,{item:!0,xs:12,children:e.jsx(g,{error:!0,children:s.submit})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(D,{children:e.jsx(m,{disableElevation:!0,disabled:r,fullWidth:!0,size:"large",type:"submit",variant:"contained",style:{backgroundColor:"rgba(255, 217, 0, 0.641)",color:"black"},children:"Connexion"})})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(E,{children:e.jsx(C,{variant:"caption",children:"La DGB sur :"})})}),e.jsx(t,{item:!0,xs:12,children:e.jsx($,{})})]})})})]})}y.propTypes={isDemo:T.bool};function i0(){return e.jsx(Z,{children:e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(c,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:e.jsx(C,{variant:"h3",children:"Login"})})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(y,{})})]})})}export{i0 as default};
