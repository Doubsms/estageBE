import{r as a,u as de,j as e,J as P,O as ue,aY as xe,aZ as he,a_ as pe,aM as me,G as k,z as T,B as u,A as U,T as i,D as ge,v as Z,N as K,x as L,I as R,aB as se,a$ as fe,U as ee,aX as ye,a9 as ve,C as Se,ay as Ae,w as ke,L as Te,F as Ce}from"./index-zHPv1lze.js";import{S as je}from"./Snackbar-XurLPfxZ.js";import{A as be}from"./Alert-D6te_eKs.js";import{P as z}from"./Person-CVTBdQV4.js";import{A as B}from"./Add-gZbuNXg0.js";import{T as D}from"./TextField-DNVhVnCv.js";import{B as te}from"./Button-0T1tR8_c.js";import{C as Ee}from"./CircularProgress-BHFhENdB.js";import{G as oe}from"./Group-CKNX0Zix.js";import{L as re}from"./ListItem-CSuwil7H.js";import{C as Me}from"./Check-DYQkY_Ur.js";import{C as Ie}from"./Close-B5GqWx1j.js";import{D as Ne}from"./Delete-DRqEtRSt.js";import{B as Y}from"./Book-DYQMKMBw.js";import{A as X}from"./Autocomplete-DkJdCr17.js";import{F as ie}from"./FormControlLabel-D_GYa5-T.js";import{C as ae}from"./Checkbox-BNRiEFgI.js";import{D as De}from"./DateRange-tTFtj54i.js";import{M as le}from"./MenuBook-DDGUq44w.js";import"./Close-DS868zx3.js";import"./OutlinedInput-C5vYvqQm.js";import"./useFormControl-BwsGWz84.js";import"./Select-DCG_CkE0.js";import"./FormHelperText-BXMwkblB.js";import"./ButtonGroupButtonContext-BYVHV5Ft.js";import"./SwitchBase-CEgujy3G.js";/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ze=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(d,l,x)=>x?x.toUpperCase():l.toLowerCase()),ce=o=>{const d=ze(o);return d.charAt(0).toUpperCase()+d.slice(1)},we=(...o)=>o.filter((d,l,x)=>!!d&&d.trim()!==""&&x.indexOf(d)===l).join(" ").trim(),Ge=o=>{for(const d in o)if(d.startsWith("aria-")||d==="role"||d==="title")return!0};/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Le={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=a.forwardRef(({color:o="currentColor",size:d=24,strokeWidth:l=2,absoluteStrokeWidth:x,className:g="",children:h,iconNode:b,...c},p)=>a.createElement("svg",{ref:p,...Le,width:d,height:d,stroke:o,strokeWidth:x?Number(l)*24/Number(d):l,className:we("lucide",g),...!h&&!Ge(c)&&{"aria-hidden":"true"},...c},[...b.map(([E,j])=>a.createElement(E,j)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=(o,d)=>{const l=a.forwardRef(({className:x,...g},h)=>a.createElement(Re,{ref:h,iconNode:d,className:we(`lucide-${Oe(ce(o))}`,`lucide-${o}`,x),...g}));return l.displayName=ce(o),l};/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Fe=$("book-open",$e);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],qe=$("circle-alert",We);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ue=$("circle-check-big",Pe);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],_e=$("users",Be);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],He=$("x",Qe),Je=({enseignants:o,setEnseignants:d})=>{const l=de(),[x,g]=a.useState(""),[h,b]=a.useState(!1),[c,p]=a.useState(null),[E,j]=a.useState(""),[w,_]=a.useState(""),[F,G]=a.useState(null),[y,v]=a.useState([]),[C,Q]=a.useState(!1),[f,W]=a.useState({open:!1,message:"",severity:"success"}),M="",S={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}},m=(r,n="success")=>{W({open:!0,message:r,severity:n})},q=(r,n)=>{n!=="clickaway"&&W(N=>({...N,open:!1}))},O=async()=>{try{const r=await fetch(`${M}/listeenseignant`,{method:"GET",headers:S.headers});if(r.ok){const n=await r.json();d(Array.isArray(n)?n:[])}else throw new Error("Ã‰chec du chargement")}catch{m("Erreur de chargement des enseignants","error")}},H=async()=>{if(!x.trim()){m("Le nom est requis","warning");return}b(!0);try{const r=await fetch(`${M}/nouveauenseignant`,{method:"POST",headers:S.headers,body:JSON.stringify({NOMENSEIGNANT:x.trim()})});if(r.ok)g(""),O(),m("âœ… Enseignant ajoutÃ© avec succÃ¨s","success");else{const n=await r.json();m(n.error||"Ã‰chec de l'ajout","error")}}catch{m("Erreur rÃ©seau","error")}finally{b(!1)}},J=async(r,n)=>{if(window.confirm(`Confirmer la suppression de "${n}" ?`))try{(await fetch(`${M}/deleteenseignant`,{method:"DELETE",headers:S.headers,body:JSON.stringify({IDENSEIGNANT:r})})).ok?(O(),F?.IDENSEIGNANT===r&&(G(null),v([])),m(`ðŸ—‘ï¸ "${n}" supprimÃ©`,"success")):m("Ã‰chec de la suppression","error")}catch{m("Erreur rÃ©seau","error")}},V=(r,n)=>{p(r),j(n)},ne=()=>{p(null),j("")},A=async r=>{if(!E.trim()){m("Le nom ne peut pas Ãªtre vide","warning");return}try{(await fetch(`${M}/updateenseignant`,{method:"PATCH",headers:S.headers,body:JSON.stringify({IDENSEIGNANT:r,NOMENSEIGNANT:E.trim()})})).ok?(O(),p(null),j(""),m("âœï¸ Enseignant mis Ã  jour","success")):m("Ã‰chec de la modification","error")}catch{m("Erreur rÃ©seau","error")}},t=async r=>{if(F?.IDENSEIGNANT===r.IDENSEIGNANT){G(null),v([]);return}G(r),Q(!0);try{const n=await fetch(`${M}/moduleenseignant/${r.IDENSEIGNANT}`,{method:"GET",headers:S.headers});if(n.ok){const N=await n.json();v(N.data||[])}else v([]),m("Impossible de charger les modules","warning")}catch{v([]),m("Erreur de connexion","error")}finally{Q(!1)}},s=o.filter(r=>r.NOMENSEIGNANT.toLowerCase().includes(w.toLowerCase()));return a.useEffect(()=>{O()},[]),e.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(je,{open:f.open,autoHideDuration:4e3,onClose:q,anchorOrigin:{vertical:"top",horizontal:"center"},TransitionComponent:ue,TransitionProps:{direction:"down"},sx:{mt:"20px",zIndex:9999},children:e.jsx(be,{onClose:q,severity:f.severity,sx:{fontWeight:500,fontSize:"1.05rem",borderRadius:2,minWidth:300,textAlign:"center",justifyContent:"center",backgroundColor:f.severity==="success"?"#e8f5e9":f.severity==="error"?"#ffebee":f.severity==="warning"?"#fff8e1":"#e3f2fd",color:f.severity==="success"?"#2e7d32":f.severity==="error"?"#c62828":f.severity==="warning"?"#f57f17":"#0277bd",boxShadow:2,"& .MuiAlert-icon":{color:"inherit"},"& .MuiAlert-message":{width:"100%"}},iconMapping:{success:e.jsx(me,{size:24}),error:e.jsx(pe,{size:24}),warning:e.jsx(he,{size:24}),info:e.jsx(xe,{size:24})},children:f.message})}),e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,children:e.jsx(T,{sx:{p:1,borderRadius:4,background:"linear-gradient(45deg, #c6daf767, #91adf36f)",color:"black",boxShadow:l.shadows[3]},children:e.jsxs(u,{display:"flex",alignItems:"center",children:[e.jsx(U,{sx:{bgcolor:"rgba(244, 247, 249, 0.93)",mr:2,width:60,height:60},children:e.jsx(z,{sx:{fontSize:32,color:"blue"}})}),e.jsxs(u,{children:[e.jsx(i,{variant:"h4",fontWeight:700,sx:{color:"blue"},children:"Gestion des Enseignants"}),e.jsx(i,{variant:"body1",sx:{opacity:.9},children:"Ajoutez et gÃ©rez les enseignants du centre d'excellence"})]})]})})}),e.jsx(k,{item:!0,xs:12,md:6,children:e.jsxs(T,{sx:{p:3,borderRadius:4,height:"100%",boxShadow:l.shadows[3],borderLeft:`4px solid ${l.palette.primary.main}`},children:[e.jsxs(i,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",fontWeight:600},children:[e.jsx(B,{sx:{mr:1,color:l.palette.primary.main}}),"Ajouter un enseignant"]}),e.jsx(D,{fullWidth:!0,variant:"outlined",label:"Nom complet",value:x,onChange:r=>g(r.target.value),placeholder:"Ex: Dr. Jean Dupont",InputProps:{startAdornment:e.jsx(z,{sx:{color:"action.active",mr:1}})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:3}}}),e.jsx(te,{variant:"contained",color:"primary",onClick:H,disabled:h,startIcon:h?e.jsx(Ee,{size:20,color:"inherit"}):e.jsx(B,{}),sx:{height:48,width:"100%",borderRadius:3,fontWeight:600,textTransform:"none",fontSize:16,background:"linear-gradient(45deg, #91c9f391, #c6daf767, #f5f6f8ff)",color:"#321d67f0",boxShadow:"none","&:hover":{boxShadow:l.shadows[2]}},children:h?"Enregistrement...":"Ajouter enseignant"}),e.jsx(ge,{sx:{my:2}}),e.jsxs(u,{display:"flex",alignItems:"center",color:"text.secondary",children:[e.jsx(oe,{sx:{mr:1}}),e.jsxs(i,{variant:"body2",children:[o.length," enseignant",o.length!==1?"s":""," enregistrÃ©",o.length!==1?"s":""]})]})]})}),e.jsx(k,{item:!0,xs:12,md:6,children:e.jsxs(T,{sx:{p:3,borderRadius:4,height:"100%",boxShadow:l.shadows[3],display:"flex",flexDirection:"column"},children:[e.jsxs(u,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsxs(i,{variant:"h6",sx:{fontWeight:600,display:"flex",alignItems:"center"},children:[e.jsx(oe,{sx:{mr:1,color:l.palette.primary.main}}),"Liste des enseignants"]}),e.jsx(Z,{label:`${o.length} enregistrÃ©s`,size:"small",color:"primary",variant:"outlined"})]}),e.jsx(D,{size:"small",variant:"outlined",placeholder:"Rechercher un enseignant...",value:w,onChange:r=>_(r.target.value),sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2}},InputProps:{startAdornment:e.jsx(z,{sx:{color:"action.active",mr:1,fontSize:20}})}}),s.length===0?e.jsxs(u,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",p:4},children:[e.jsx(z,{sx:{fontSize:60,color:"action.disabled",mb:2}}),e.jsx(i,{variant:"h6",color:"textSecondary",gutterBottom:!0,children:w?"Aucun rÃ©sultat":"Aucun enseignant"}),e.jsx(i,{variant:"body1",color:"textSecondary",children:w?"Essayez un autre terme.":"Ajoutez votre premier enseignant."})]}):e.jsx(K,{sx:{flex:1,overflow:"auto",maxHeight:400,pr:1},children:s.map(r=>e.jsxs(u,{component:P.div,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:[e.jsx(T,{sx:{mb:2,borderRadius:3,overflow:"hidden",boxShadow:l.shadows[1],transition:"transform 0.3s, box-shadow 0.3s","&:hover":{transform:"translateY(-2px)",boxShadow:l.shadows[4]},cursor:"pointer"},onClick:()=>t(r),children:e.jsx(re,{sx:{py:2},children:c===r.IDENSEIGNANT?e.jsx(u,{width:"100%",children:e.jsx(D,{fullWidth:!0,variant:"outlined",value:E,onChange:n=>j(n.target.value),autoFocus:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},InputProps:{startAdornment:e.jsx(se,{sx:{color:"action.active",mr:1}}),endAdornment:e.jsxs(u,{children:[e.jsx(L,{title:"Enregistrer",children:e.jsx(R,{onClick:()=>A(r.IDENSEIGNANT),color:"primary",size:"small",children:e.jsx(Me,{})})}),e.jsx(L,{title:"Annuler",children:e.jsx(R,{onClick:ne,color:"secondary",size:"small",children:e.jsx(Ie,{})})})]})}})}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{children:e.jsx(U,{sx:{bgcolor:l.palette.primary.light,color:l.palette.primary.contrastText,width:40,height:40},children:r.NOMENSEIGNANT.charAt(0).toUpperCase()})}),e.jsx(ee,{primary:e.jsx(i,{variant:"body1",fontWeight:500,sx:{wordBreak:"break-word"},children:r.NOMENSEIGNANT}),secondary:`ID: ${r.IDENSEIGNANT}`,secondaryTypographyProps:{variant:"caption",color:"text.secondary"}}),e.jsxs(ye,{children:[e.jsx(L,{title:"Modifier",children:e.jsx(R,{edge:"end",onClick:n=>{n.stopPropagation(),V(r.IDENSEIGNANT,r.NOMENSEIGNANT)},sx:{mr:1},children:e.jsx(se,{color:"primary"})})}),e.jsx(L,{title:"Supprimer",children:e.jsx(R,{edge:"end",onClick:n=>{n.stopPropagation(),J(r.IDENSEIGNANT,r.NOMENSEIGNANT)},children:e.jsx(Ne,{color:"error"})})})]})]})})}),e.jsx(ve,{in:F?.IDENSEIGNANT===r.IDENSEIGNANT,children:e.jsxs(Se,{sx:{mx:2,mb:2,borderRadius:2,boxShadow:1},children:[e.jsx(Ae,{title:e.jsx(i,{variant:"subtitle1",fontWeight:"bold",children:"Modules dispensÃ©s"}),subheader:`${y.length} module(s)`,sx:{pb:0}}),e.jsx(ke,{sx:{pt:1},children:C?e.jsxs(u,{sx:{width:"100%"},children:[e.jsx(Te,{}),e.jsx(i,{variant:"body2",color:"textSecondary",sx:{mt:1},children:"Chargement des modules..."})]}):y.length>0?e.jsx(K,{dense:!0,children:y.map(n=>e.jsx(re,{children:e.jsx(ee,{primary:n.intituleModule,secondary:e.jsxs(e.Fragment,{children:[e.jsx(i,{component:"span",variant:"body2",color:"textPrimary",children:n.intituleFormation||"Formation non dÃ©finie"}),e.jsx("br",{}),e.jsxs(i,{component:"span",variant:"caption",color:"textSecondary",children:["AnnÃ©e: ",n.ANNEE," | ",n.QUADRIMESTRE1===1?"Premier Quadrimestre":n.QUADRIMESTRE2===1?"DeuxiÃ¨me Quadrimestre":"non dÃ©finie"]})]})})},n.IDMODULE))}):e.jsx(i,{variant:"body2",color:"textSecondary",children:"Aucun module associÃ©."})})]})})]},r.IDENSEIGNANT))})]})})]})]})},Ve=()=>{const o=de(),[d,l]=a.useState([]),[x,g]=a.useState([]),[h,b]=a.useState([]),[c,p]=a.useState({intitule:"",idFormation:null,idEnseignant:null,quadrimestres:[],annee:""}),[E,j]=a.useState(!1),[w,_]=a.useState(null),[F,G]=a.useState({intitule:"",idFormation:null,idEnseignant:null,quadrimestres:[],annee:""}),[y,v]=a.useState({open:!1,message:"",severity:"success"}),C="",f={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}},W=new Date().getFullYear(),M=Array.from({length:11},(t,s)=>W-5+s),I=(t,s="success")=>{v({open:!0,message:t,severity:s})},S=(t,s)=>{s!=="clickaway"&&v(r=>({...r,open:!1}))},m=async()=>{try{const t=await fetch(`${C}/listemodule`,{method:"GET",headers:f.headers});if(t.ok){const s=await t.json(),r=(Array.isArray(s)?s:[]).map(n=>({...n,NOMENSEIGNANT:n.NOMENSEIGNANT||null}));l(r)}else throw new Error("Ã‰chec du chargement des modules")}catch(t){console.error("Erreur de chargement des modules:",t),I("Erreur de chargement des modules","error"),l([])}},q=async()=>{try{const t=await fetch(`${C}/listeformation`,{method:"GET",headers:f.headers});if(t.ok){const s=await t.json();g(Array.isArray(s)?s:[])}}catch(t){console.error("Erreur de chargement des formations:",t),g([])}},O=async()=>{try{const t=await fetch(`${C}/listeenseignant`,{method:"GET",headers:f.headers});if(t.ok){const s=await t.json();b(Array.isArray(s)?s:[])}}catch(t){console.error("Erreur de chargement des enseignants:",t),b([])}},H=async()=>{if(!c.intitule||!c.idFormation){I("L'intitulÃ© et la formation sont obligatoires","warning");return}j(!0);try{const t=await fetch(`${C}/nouveaumodule`,{method:"POST",headers:f.headers,body:JSON.stringify({intitule:c.intitule,idFormation:c.idFormation,idEnseignant:c.idEnseignant||null,quadrimestre1:c.quadrimestres.includes("1")?"1":null,quadrimestre2:c.quadrimestres.includes("2")?"2":null,annee:c.annee||null})});if(t.ok)p({intitule:"",idFormation:null,idEnseignant:null,quadrimestres:[],annee:""}),m(),I("ðŸ“š Module ajoutÃ© avec succÃ¨s","success");else{const s=await t.json();I(s.error||"Ã‰chec de l'ajout du module","error")}}catch{I("Erreur rÃ©seau","error")}finally{j(!1)}},J=async(t,s)=>{if(window.confirm(`Confirmer la suppression du module "${s}" ?`))try{const r=await fetch(`${C}/deletemodule/${t}`,{method:"DELETE",headers:f.headers});if(r.ok)m(),I(`ðŸ—‘ï¸ Module "${s}" supprimÃ©`,"success");else{const n=await r.json();I(n.error||"Ã‰chec de la suppression","error")}}catch{I("Erreur rÃ©seau","error")}},V=()=>{_(null),G({intitule:"",idFormation:null,idEnseignant:null,quadrimestres:[],annee:""})},A=(()=>{const t={};return d.forEach(s=>{const r=`${s.INTITULE}-${s.IDFORMATION}`;if(t[r]||(t[r]={...s,enseignants:[],quadrimestres:new Set,annees:new Set}),s.NOMENSEIGNANT){const n=h.find(N=>N.IDENSEIGNANT===s.IDENSEIGNANT);n&&!t[r].enseignants.some(N=>N.IDENSEIGNANT===n.IDENSEIGNANT)&&t[r].enseignants.push(n)}s.QUADRIMESTRE1&&t[r].quadrimestres.add("Q1"),s.QUADRIMESTRE2&&t[r].quadrimestres.add("Q2"),s.ANNEE&&t[r].annees.add(s.ANNEE)}),Object.values(t)})();return a.useEffect(()=>{m(),q(),O()},[]),e.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(je,{open:y.open,autoHideDuration:4e3,onClose:S,anchorOrigin:{vertical:"top",horizontal:"center"},TransitionComponent:ue,TransitionProps:{direction:"down"},sx:{mt:"20px",zIndex:9999},children:e.jsx(be,{onClose:S,severity:y.severity,sx:{fontWeight:500,fontSize:"1.05rem",borderRadius:2,minWidth:300,textAlign:"center",justifyContent:"center",backgroundColor:y.severity==="success"?"#e8f5e9":y.severity==="error"?"#ffebee":y.severity==="warning"?"#fff8e1":"#e3f2fd",color:y.severity==="success"?"#2e7d32":y.severity==="error"?"#c62828":y.severity==="warning"?"#f57f17":"#0277bd",boxShadow:2,"& .MuiAlert-icon":{color:"inherit"},"& .MuiAlert-message":{width:"100%"}},iconMapping:{success:e.jsx(me,{size:24}),error:e.jsx(pe,{size:24}),warning:e.jsx(he,{size:24}),info:e.jsx(xe,{size:24})},children:y.message})}),e.jsxs(k,{container:!0,spacing:3,children:[e.jsx(k,{item:!0,xs:12,children:e.jsx(T,{sx:{p:1,borderRadius:4,background:"linear-gradient(45deg, #c6daf767, #91adf36f)",color:"black",boxShadow:o.shadows[3]},children:e.jsxs(u,{display:"flex",alignItems:"center",children:[e.jsx(U,{sx:{bgcolor:"rgba(244, 247, 249, 0.93)",mr:2,width:60,height:60},children:e.jsx(Y,{sx:{fontSize:32,color:"blue"}})}),e.jsxs(u,{children:[e.jsx(i,{variant:"h4",fontWeight:700,sx:{color:"blue"},children:"Gestion des Modules"}),e.jsx(i,{variant:"body1",sx:{opacity:.9},children:"Ajoutez et gÃ©rez les modules du centre d'excellence"})]})]})})}),e.jsx(k,{item:!0,xs:12,md:6,children:e.jsxs(T,{sx:{p:3,borderRadius:4,height:"100%",boxShadow:o.shadows[3],borderLeft:`4px solid ${o.palette.primary.main}`},children:[e.jsxs(i,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",fontWeight:600},children:[e.jsx(B,{sx:{mr:1,color:o.palette.primary.main}}),"Ajouter un module"]}),e.jsx(D,{fullWidth:!0,variant:"outlined",label:"IntitulÃ© du module *",value:c.intitule,onChange:t=>p({...c,intitule:t.target.value}),placeholder:"Ex: Algorithmique avancÃ©e",InputProps:{startAdornment:e.jsx(Y,{sx:{color:"action.active",mr:1}})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:3}}}),e.jsx(X,{options:x,getOptionLabel:t=>t.INTITULE||"",value:x.find(t=>t.IDFORMATIONM===c.idFormation)||null,onChange:(t,s)=>{p({...c,idFormation:s?.IDFORMATIONM||null})},renderInput:t=>e.jsx(D,{...t,label:"Formation *",variant:"outlined",InputProps:{...t.InputProps,startAdornment:e.jsx(Ce,{sx:{color:"action.active",mr:1}})},sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}}),noOptionsText:"Aucune formation trouvÃ©e",filterOptions:(t,{inputValue:s})=>t.filter(r=>r.INTITULE.toLowerCase().includes(s.toLowerCase())),sx:{mb:2}}),e.jsx(X,{options:h,getOptionLabel:t=>t.NOMENSEIGNANT||"",value:h.find(t=>t.IDENSEIGNANT===c.idEnseignant)||null,onChange:(t,s)=>{p({...c,idEnseignant:s?.IDENSEIGNANT||null})},renderInput:t=>e.jsx(D,{...t,label:"Enseignant (optionnel)",variant:"outlined",InputProps:{...t.InputProps,startAdornment:e.jsx(z,{sx:{color:"action.active",mr:1}})},sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}}),noOptionsText:"Aucun enseignant trouvÃ©",filterOptions:(t,{inputValue:s})=>t.filter(r=>r.NOMENSEIGNANT.toLowerCase().includes(s.toLowerCase())),sx:{mb:2}}),e.jsxs(u,{sx:{mb:2},children:[e.jsx(i,{variant:"subtitle1",gutterBottom:!0,children:"Quadrimestres"}),e.jsx(ie,{control:e.jsx(ae,{checked:c.quadrimestres.includes("1"),onChange:t=>{const s=t.target.checked;p(r=>({...r,quadrimestres:s?[...r.quadrimestres,"1"]:r.quadrimestres.filter(n=>n!=="1")}))},color:"primary"}),label:"Quadrimestre 1"}),e.jsx(ie,{control:e.jsx(ae,{checked:c.quadrimestres.includes("2"),onChange:t=>{const s=t.target.checked;p(r=>({...r,quadrimestres:s?[...r.quadrimestres,"2"]:r.quadrimestres.filter(n=>n!=="2")}))},color:"primary"}),label:"Quadrimestre 2"})]}),e.jsx(X,{options:M,value:c.annee||null,onChange:(t,s)=>{p({...c,annee:s})},renderInput:t=>e.jsx(D,{...t,label:"AnnÃ©e",variant:"outlined",InputProps:{...t.InputProps,startAdornment:e.jsx(De,{sx:{color:"action.active",mr:1}})},sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}}),noOptionsText:"Aucune annÃ©e trouvÃ©e",sx:{mb:2}}),e.jsx(te,{variant:"contained",color:"primary",onClick:H,disabled:E,startIcon:E?e.jsx(Ee,{size:20,color:"inherit"}):e.jsx(B,{}),sx:{height:48,width:"100%",borderRadius:3,fontWeight:600,textTransform:"none",fontSize:16,background:"linear-gradient(45deg, #91c9f391, #c6daf767, #f5f6f8ff)",color:"#321d67f0",boxShadow:"none","&:hover":{boxShadow:o.shadows[2]}},children:E?"Enregistrement...":"Ajouter module"}),e.jsx(ge,{sx:{my:2}}),e.jsxs(u,{display:"flex",alignItems:"center",color:"text.secondary",children:[e.jsx(le,{sx:{mr:1}}),e.jsxs(i,{variant:"body2",children:[A.length," module",A.length!==1?"s":""," enregistrÃ©",A.length!==1?"s":""]})]})]})}),e.jsx(k,{item:!0,xs:12,md:6,children:e.jsxs(T,{sx:{p:3,borderRadius:4,height:"100%",boxShadow:o.shadows[3],display:"flex",flexDirection:"column"},children:[e.jsxs(u,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsxs(i,{variant:"h6",sx:{fontWeight:600,display:"flex",alignItems:"center"},children:[e.jsx(le,{sx:{mr:1,color:o.palette.primary.main}}),"Liste des modules"]}),e.jsx(Z,{label:`${A.length} uniques`,size:"small",color:"primary",variant:"outlined"})]}),A.length===0?e.jsxs(u,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",p:4},children:[e.jsx(Y,{sx:{fontSize:60,color:"action.disabled",mb:2}}),e.jsx(i,{variant:"h6",color:"textSecondary",gutterBottom:!0,children:"Aucun module"}),e.jsx(i,{variant:"body1",color:"textSecondary",children:"Ajoutez votre premier module"})]}):e.jsx(K,{sx:{flex:1,overflow:"auto",maxHeight:500,pr:1},children:A.map(t=>{const s=Array.from(t.quadrimestres).join(", ")||"Non dÃ©fini",r=Array.from(t.annees).join(", ")||"Non dÃ©finie";return e.jsx(u,{component:P.div,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:e.jsx(T,{sx:{mb:2,borderRadius:3,overflow:"hidden",boxShadow:o.shadows[1],transition:"transform 0.3s, box-shadow 0.3s","&:hover":{transform:"translateY(-2px)",boxShadow:o.shadows[4]}},children:e.jsx(re,{sx:{py:2},children:w===t.IDMODULE?e.jsxs(u,{width:"100%",sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(i,{variant:"body2",color:"warning.main",children:"Ã‰dition non supportÃ©e en mode groupÃ©. Cliquez sur un enseignant pour Ã©diter."}),e.jsx(te,{size:"small",variant:"outlined",onClick:V,startIcon:e.jsx(Ie,{}),children:"Fermer"})]}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{children:e.jsx(U,{sx:{bgcolor:o.palette.primary.light,color:o.palette.primary.contrastText,width:40,height:40},children:t.INTITULE.charAt(0).toUpperCase()})}),e.jsx(ee,{primary:e.jsx(i,{variant:"body1",fontWeight:500,sx:{wordBreak:"break-word"},children:t.INTITULE}),secondary:e.jsxs(u,{children:[e.jsxs(i,{variant:"caption",color:"text.secondary",display:"block",children:["Formation: ",x.find(n=>n.IDFORMATIONM===t.IDFORMATION)?.INTITULE||"Inconnue"]}),e.jsxs(i,{variant:"caption",color:"text.secondary",display:"block",children:["Quadrimestres: ",s]}),e.jsxs(i,{variant:"caption",color:"text.secondary",display:"block",children:["AnnÃ©e(s): ",r]}),e.jsxs(u,{sx:{mt:1},children:[e.jsx(i,{variant:"caption",color:"text.primary",fontWeight:"bold",children:"Enseignants:"}),e.jsx(u,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:.5},children:t.enseignants.length>0?t.enseignants.map(n=>e.jsx(Z,{label:n.NOMENSEIGNANT,size:"small",icon:e.jsx(z,{fontSize:"small"}),sx:{fontSize:"0.8rem"}},n.IDENSEIGNANT)):e.jsx(i,{variant:"caption",color:"text.secondary",children:"Aucun enseignant assignÃ©"})})]})]})}),e.jsx(ye,{children:e.jsx(L,{title:"Supprimer",children:e.jsx(R,{edge:"end",onClick:()=>J(t.IDMODULE,t.INTITULE),children:e.jsx(Ne,{color:"error"})})})})]})})})},`${t.INTITULE}-${t.IDFORMATION}`)})})]})})]})]})},It=()=>{const[o,d]=a.useState(0),[l,x]=a.useState([]),[g,h]=a.useState({show:!1,message:"",type:"success"}),b=(c,p)=>{h({show:!0,message:c,type:p}),setTimeout(()=>{h({show:!1,message:"",type:"success"})},4e3)};return a.useEffect(()=>{(async()=>{try{const p=localStorage.getItem("token"),j=await fetch("/listeenseignant",{method:"GET",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(j.ok){const w=await j.json();x(w||[])}}catch{b("Erreur lors du chargement des enseignants","error")}})()},[]),e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"24px",fontFamily:"system-ui, -apple-system, sans-serif",backgroundColor:"#f8fafc",minHeight:"100vh"},children:[e.jsxs("div",{style:{background:"white",borderRadius:"12px",boxShadow:"0 4px 16px rgba(0,0,0,0.05)",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",backgroundColor:"#f8fafc",padding:"4px",margin:0},children:[e.jsxs("button",{onClick:()=>d(0),style:{flex:1,padding:"16px 24px",border:"none",background:o===0?"white":"transparent",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"1rem",fontWeight:"500",color:o===0?"#3b82f6":"#64748b",borderRadius:"8px",transition:"all 0.3s ease",boxShadow:o===0?"0 2px 4px rgba(0,0,0,0.1)":"none"},children:[e.jsx(_e,{size:20}),"Enseignants"]}),e.jsxs("button",{onClick:()=>d(1),style:{flex:1,padding:"16px 24px",border:"none",background:o===1?"white":"transparent",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"1rem",fontWeight:"500",color:o===1?"#3b82f6":"#64748b",borderRadius:"8px",transition:"all 0.3s ease",boxShadow:o===1?"0 2px 4px rgba(0,0,0,0.1)":"none"},children:[e.jsx(Fe,{size:20}),"Modules"]})]}),e.jsxs("div",{style:{padding:"32px"},children:[o===0&&e.jsx(Je,{enseignants:l,setEnseignants:x,showNotification:b}),o===1&&e.jsx(Ve,{enseignants:l,showNotification:b})]})]}),g.show&&e.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"16px 20px",borderRadius:"8px",color:"white",fontSize:"0.95rem",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px",zIndex:1e3,minWidth:"300px",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",background:g.type==="success"?"linear-gradient(135deg, #10b981, #059669)":g.type==="error"?"linear-gradient(135deg, #ef4444, #dc2626)":"linear-gradient(135deg, #f59e0b, #d97706)",animation:"slideInRight 0.3s ease-out"},children:[g.type==="success"&&e.jsx(Ue,{size:18}),g.type==="error"&&e.jsx(qe,{size:18}),g.message,e.jsx("button",{onClick:()=>h({show:!1,message:"",type:"success"}),style:{marginLeft:"auto",background:"transparent",border:"none",color:"white",cursor:"pointer",padding:"2px"},children:e.jsx(He,{size:16})})]}),e.jsx("style",{children:`
          @keyframes slideInRight {
            from {
              transform: translateX(100%);
              opacity: 0;
            }
            to {
              transform: translateX(0);
              opacity: 1;
            }
          }

          input:focus, select:focus {
            outline: none !important;
            border-color: #3b82f6 !important;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1) !important;
          }

          button:focus {
            outline: none !important;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3) !important;
          }

          button:disabled {
            opacity: 0.6 !important;
            cursor: not-allowed !important;
            transform: none !important;
          }

          @media (max-width: 768px) {
            .grid-responsive {
              grid-template-columns: 1fr !important;
            }
            
            .tab-container {
              flex-direction: column !important;
            }
            
            .form-grid {
              grid-template-columns: 1fr !important;
            }
          }
        `})]})};export{It as default};
