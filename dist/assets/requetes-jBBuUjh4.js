import{l as De,j as e,r as l,z as U,G as u,B as o,A as ve,K as Le,T as n,D as q,W as Ue,X as z,F as O,s as ze,I as Z,v as R,Z as Pe,C as b,w as g,a9 as Fe,N as We,Q as Be,U as He}from"./index-zHPv1lze.js";import"./dayjs.min-BzR6NVRV.js";import{a as _e}from"./index-C3O71W1x.js";import{C as ee}from"./react-apexcharts.min-rkE0FX8L.js";import{Q as $,E as k}from"./QueryStats-CBn45aSn.js";import{G as A}from"./Group-CKNX0Zix.js";import{B as P}from"./BarChart-CtMQudBV.js";import{F,S as W}from"./Select-DCG_CkE0.js";import{I as B}from"./OutlinedInput-C5vYvqQm.js";import{M as H}from"./MenuItem-D-1uk7AZ.js";import{C as qe}from"./CircularProgress-BHFhENdB.js";import{S as $e}from"./Send-kcxa8VWl.js";import{a as ke,D as we}from"./DialogContent-COvIddmc.js";import{D as Ye}from"./DialogTitle-CCgKuUmv.js";import{C as Ge}from"./Close-B5GqWx1j.js";import{C as Ve}from"./CalendarToday-BYxDq_1X.js";import{S as Qe}from"./Snackbar-XurLPfxZ.js";import{B as Je}from"./Button-0T1tR8_c.js";import{T as se,a as te,b as re,c as y,d as a,e as ne}from"./TableRow-70JfVjDg.js";import{B as Xe}from"./Book-DYQMKMBw.js";import{F as w,M as Y}from"./Male-D6PrUK3l.js";import{E as Ke}from"./ExpandLess-BVSXxMnp.js";import{E as Ze}from"./ExpandMore-DWiDQC_Y.js";import{L as es}from"./ListItem-CSuwil7H.js";import{A as ss}from"./Alert-D6te_eKs.js";import"./useFormControl-BwsGWz84.js";import"./ButtonGroupButtonContext-BYVHV5Ft.js";import"./Close-DS868zx3.js";const _=De(e.jsx("path",{d:"M11 2v20c-5.07-.5-9-4.79-9-10s3.93-9.5 9-10m2.03 0v8.99H22c-.47-4.74-4.24-8.52-8.97-8.99m0 11.01V22c4.74-.47 8.5-4.25 8.97-8.99z"}),"PieChart"),ts=Pe.forwardRef(function(I,m){return e.jsx(ss,{elevation:6,ref:m,...I})}),rs=ze(Je)(({theme:t})=>({marginTop:t.spacing(2),background:"linear-gradient(to top, rgba(173, 216, 230, 0.47), rgba(173, 216, 230, 0))",color:"blue",border:"2px solid blue",borderRadius:"20px",fontSize:"1.2rem",padding:t.spacing(1.5,4),boxShadow:"inset 0 2px 5px rgba(173, 216, 230, 0.6)",transition:"background-color 0.3s, transform 0.3s",height:"6vh",width:"25vw",textTransform:"none","&:hover":{background:"linear-gradient(to top, rgba(173, 216, 230, 0.7), rgba(173, 216, 230, 0))",transform:"translateY(-2px)"}})),ns=()=>{const t=new Date().getFullYear(),I=[];for(let m=2025;m<=t;m++)I.push(`${m}-${m+1}`);return I},Ls=()=>{const[t,I]=l.useState(0),[m,C]=l.useState(!1),[j,G]=l.useState([]),[oe,M]=l.useState(!1),[ae,V]=l.useState(!1),[ie,le]=l.useState(""),[ce,de]=l.useState("success"),[Q,xe]=l.useState({}),c=ns(),[E,me]=l.useState(c[c.length-1]||"2025-2026"),[p,he]=l.useState(c[c.length-1]||"2025-2026"),[S,fe]=l.useState(c[c.length-1]||"2025-2026"),[N,ue]=l.useState(c[c.length-1]||"2025-2026"),[D,J]=l.useState({hommes:0,femmes:0}),[h,X]=l.useState([]),Ee=(s,r)=>{I(r),G([]),J({hommes:0,femmes:0}),X([]),M(!1)},v=s=>parseInt(s.split("-")[0]),pe=()=>`SELECT 
      m.IDMODULE,
      m.INTITULE as MODULE_INTITULE,
      m.QUADRIMESTRE1,
      m.QUADRIMESTRE2,
      m.ANNEE,
      e.NOMENSEIGNANT,
      f.INTITULE as FORMATION_INTITULE
    FROM modulecentreexcellence m
    LEFT JOIN enseignant e ON m.IDENSEIGNANT = e.IDENSEIGNANT
    LEFT JOIN formationmodifiable f ON m.IDFORMATION = f.IDFORMATIONM
    WHERE m.ANNEE = ${v(E)}
    ORDER BY m.QUADRIMESTRE1, m.QUADRIMESTRE2, m.INTITULE;`,Se=()=>{const s=v(p),r=`${s}-07-01`,i=`${s+1}-06-30`;return`SELECT DISTINCT
              p.IDPERSONNEL,
              p.MATRICULE,
              p.NOM,
              p.PRENOM,
              p.FONCTION,
              p.GRADE,
              p.SEXE,
              s.NOMSTRUCTURE,
              GROUP_CONCAT(DISTINCT CONCAT(f.INTITULE, ' (', DATE_FORMAT(sf.DATE, '%d/%m/%Y'), ')') SEPARATOR '|') as FORMATIONS
            FROM personel p
            INNER JOIN participer_session ps ON p.IDPERSONNEL = ps.IDPERSONNEL
            INNER JOIN sessionformation sf ON ps.IDSESSION = sf.IDSESSION
            INNER JOIN formationmodifiable f ON sf.IDFORMATION = f.IDFORMATIONM
            LEFT JOIN structure s ON p.IDSTRUCTURE = s.IDSTRUCTURE
            WHERE f.TYPEFORMATIONPASSERELLE = 1
              AND sf.DATE >= '${r}' 
              AND sf.DATE <= '${i}'
            GROUP BY p.IDPERSONNEL, p.MATRICULE, p.NOM, p.PRENOM, p.FONCTION, p.GRADE, p.SEXE, s.NOMSTRUCTURE
            ORDER BY p.NOM, p.PRENOM;`},Ne=()=>{const s=v(S),r=`${s}-07-01`,i=`${s+1}-06-30`;return`SELECT 
              COUNT(CASE WHEN p.SEXE = 'Masculin' THEN 1 END) as Hommes,
              COUNT(CASE WHEN p.SEXE = 'Féminin' THEN 1 END) as Femmes
            FROM personel p
            INNER JOIN participer_session ps ON p.IDPERSONNEL = ps.IDPERSONNEL
            INNER JOIN sessionformation sf ON ps.IDSESSION = sf.IDSESSION
            INNER JOIN formationmodifiable f ON sf.IDFORMATION = f.IDFORMATIONM
            WHERE f.TYPEFORMATIONPASSERELLE = 1
              AND sf.DATE >= '${r}' 
              AND sf.DATE <= '${i}';`},Ie=()=>{const s=v(N),r=`${s}-07-01`,i=`${s+1}-06-30`;return`WITH RECURSIVE StructuresHierarchie AS (
    -- Sélectionner toutes les structures parentes (racines)
    SELECT 
        IDSTRUCTURE,
        NOMSTRUCTURE,
        ABBREVIATION,
        IDSTRUCTURE as RACINE_ID,
        NOMSTRUCTURE as RACINE_NOM,
        ABBREVIATION as RACINE_ABBR
    FROM structure
    WHERE IDPARENT IS NULL
    
    UNION ALL
    
    -- Sélectionner les structures filles et les rattacher à leur parent
    SELECT 
        s.IDSTRUCTURE,
        s.NOMSTRUCTURE,
        s.ABBREVIATION,
        sh.RACINE_ID,
        sh.RACINE_NOM,
        sh.RACINE_ABBR
    FROM structure s
    INNER JOIN StructuresHierarchie sh ON s.IDPARENT = sh.IDSTRUCTURE
)

SELECT 
    sh.RACINE_ID as IDSTRUCTURE_PARENT,
    sh.RACINE_NOM as NOM_STRUCTURE_PARENT,
    sh.RACINE_ABBR as ABBREVIATION,
    COUNT(DISTINCT CASE WHEN p.SEXE = 'Masculin' AND ps.IDSESSION IS NOT NULL THEN p.IDPERSONNEL END) as HOMMES,
    COUNT(DISTINCT CASE WHEN p.SEXE = 'Féminin' AND ps.IDSESSION IS NOT NULL THEN p.IDPERSONNEL END) as FEMMES,
    COUNT(DISTINCT p.IDPERSONNEL) as NOMBRE_PERSONNELS_FORMES
FROM StructuresHierarchie sh
LEFT JOIN personel p ON p.IDSTRUCTURE = sh.IDSTRUCTURE
LEFT JOIN participer_session ps ON p.IDPERSONNEL = ps.IDPERSONNEL
LEFT JOIN sessionformation sf ON ps.IDSESSION = sf.IDSESSION
LEFT JOIN formationmodifiable f ON sf.IDFORMATION = f.IDFORMATIONM
WHERE f.TYPEFORMATIONPASSERELLE = 1
  AND sf.DATE >= '${r}' 
  AND sf.DATE <= '${i}'
GROUP BY sh.RACINE_ID, sh.RACINE_NOM, sh.RACINE_ABBR
HAVING NOMBRE_PERSONNELS_FORMES > 0
ORDER BY NOMBRE_PERSONNELS_FORMES DESC;`},je=async()=>{let s="";if(t===0){if(!E){f("Veuillez sélectionner une année académique","error");return}s=pe()}else if(t===1){if(!p){f("Veuillez sélectionner une année académique","error");return}s=Se()}else if(t===2){if(!S){f("Veuillez sélectionner une année académique","error");return}s=Ne()}else if(t===3){if(!N){f("Veuillez sélectionner une année académique","error");return}s=Ie()}C(!0);try{const r=localStorage.getItem("token"),i="";if(!r){f("Token d'authentification manquant. Veuillez vous reconnecter.","error"),C(!1);return}if(!i){f("URL du backend non configurée.","error"),C(!1);return}const x=await _e.post(`${i}/personnaliserrequette`,{query:s},{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});let d=[];Array.isArray(x.data)?d=x.data:x.data&&Array.isArray(x.data.data)?d=x.data.data:x.data&&x.data.success!==void 0?d=x.data.data||[]:d=Object.values(x.data).flat().filter(L=>L&&(L.IDMODULE||L.IDPERSONNEL||L.NOMSTRUCTURE)),t===2&&d.length>0?J({hommes:d[0].Hommes||0,femmes:d[0].Femmes||0}):t===3?X(d):G(d),M(!0);let T="";t===0?T=`${d.length} modules trouvé(s)`:t===1?T=`${d.length} personnels trouvé(s)`:t===2?T="Statistiques calculées":t===3&&(T=`${d.length} structures parentes trouvée(s)`),f(T,"success")}catch(r){console.error("Erreur lors de l'exécution de la requête:",r);let i="Erreur lors de l'exécution de la requête.";r.response?r.response.status===401?i="Session expirée. Veuillez vous reconnecter.":r.response.status===403?i="Accès refusé. Permissions insuffisantes.":r.response.status===500?i="Erreur interne du serveur.":r.response.data?.message&&(i=r.response.data.message):r.request&&(i="Impossible de contacter le serveur. Vérifiez votre connexion."),f(i,"error")}finally{C(!1)}},f=(s,r)=>{le(s),de(r),V(!0)},K=()=>{V(!1)},Re=s=>{xe(r=>({...r,[s]:!r[s]}))},be={chart:{type:"bar",height:400,toolbar:{show:!0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0}}},colors:["#2196f3","#e91e63"],plotOptions:{bar:{horizontal:!1,columnWidth:"55%",borderRadius:4,dataLabels:{position:"top"}}},dataLabels:{enabled:!0,offsetY:-20,style:{fontSize:"12px",fontWeight:"bold",colors:["#333"]}},xaxis:{categories:["Effectifs"],title:{text:"Genre",style:{fontSize:"14px",fontWeight:"bold"}}},yaxis:{title:{text:"Nombre de personnels",style:{fontSize:"14px",fontWeight:"bold"}}},legend:{position:"top",horizontalAlign:"center"},title:{text:`Répartition Hommes / Femmes au Centre d'Excellence (${S})`,align:"center",style:{fontSize:"16px",fontWeight:"bold"}},tooltip:{y:{formatter:function(s){return s+" personne(s)"}}}},ge=[{name:"Hommes",data:[D.hommes]},{name:"Femmes",data:[D.femmes]}],Te={chart:{type:"bar",height:500,toolbar:{show:!0},stacked:!0},colors:["#2196f3","#e91e63"],plotOptions:{bar:{horizontal:!1,columnWidth:"55%",borderRadius:4,dataLabels:{position:"top"},stacked:!0}},dataLabels:{enabled:!0,offsetY:-20,style:{fontSize:"11px",fontWeight:"bold",colors:["#333"]},formatter:function(s){return s>0?s:""}},xaxis:{categories:h.map(s=>s.ABBREVIATION||s.NOM_STRUCTURE_PARENT),title:{text:"Structures Parentes",style:{fontSize:"14px",fontWeight:"bold"}},labels:{rotate:-45,rotateAlways:!0,style:{fontSize:"11px"}}},yaxis:{title:{text:"Nombre de personnels",style:{fontSize:"14px",fontWeight:"bold"}}},legend:{position:"top",horizontalAlign:"center"},title:{text:`Répartition Hommes / Femmes par Structure Parente (${N})`,align:"center",style:{fontSize:"16px",fontWeight:"bold"}},tooltip:{y:{formatter:function(s){return s+" personne(s)"}}}},Oe=[{name:"Hommes",data:h.map(s=>s.HOMMES||0)},{name:"Femmes",data:h.map(s=>s.FEMMES||0)}],Ae=()=>e.jsx(se,{sx:{maxHeight:500,width:"100%",border:"1px solid",borderColor:"#f0f0f0",borderRadius:2},children:e.jsxs(te,{stickyHeader:!0,children:[e.jsx(re,{children:e.jsxs(y,{sx:{bgcolor:"#fafafa"},children:[e.jsx(a,{sx:{fontWeight:"bold",fontSize:"0.95rem",width:"50px",textAlign:"center"},children:"N°"}),e.jsx(a,{sx:{fontWeight:"bold",fontSize:"0.95rem"},children:"Module"}),e.jsx(a,{sx:{fontWeight:"bold",fontSize:"0.95rem"},children:"Formation"}),e.jsx(a,{sx:{fontWeight:"bold",fontSize:"0.95rem"},children:"Enseignant"}),e.jsx(a,{sx:{fontWeight:"bold",fontSize:"0.95rem"},children:"S1"}),e.jsx(a,{sx:{fontWeight:"bold",fontSize:"0.95rem"},children:"S2"})]})}),e.jsx(ne,{children:j.length>0?j.map((s,r)=>e.jsxs(y,{hover:!0,sx:{"&:last-child td":{borderBottom:0}},children:[e.jsx(a,{sx:{fontWeight:"bold",textAlign:"center",color:"text.secondary"},children:r+1}),e.jsx(a,{sx:{fontWeight:"bold"},children:e.jsxs(o,{display:"flex",alignItems:"center",children:[e.jsx(Xe,{fontSize:"small",color:"primary",sx:{mr:1}}),s.MODULE_INTITULE]})}),e.jsx(a,{children:s.FORMATION_INTITULE||"-"}),e.jsx(a,{children:s.NOMENSEIGNANT||"-"}),e.jsx(a,{children:s.QUADRIMESTRE1?e.jsx(R,{label:"S1",size:"small",color:"primary",variant:"outlined"}):"-"}),e.jsx(a,{children:s.QUADRIMESTRE2?e.jsx(R,{label:"S2",size:"small",color:"secondary",variant:"outlined"}):"-"})]},r)):e.jsx(y,{children:e.jsxs(a,{colSpan:6,align:"center",sx:{py:4},children:[e.jsx(k,{color:"action",sx:{fontSize:40,mb:1}}),e.jsxs(n,{variant:"body1",color:"text.secondary",children:["Aucun module trouvé pour l'année ",E]})]})})})]})}),ye=()=>e.jsx(o,{children:j.length>0?j.map((s,r)=>e.jsx(b,{sx:{mb:2,borderRadius:2},children:e.jsxs(g,{children:[e.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(o,{display:"flex",alignItems:"center",sx:{flex:1},children:[s.SEXE==="Féminin"?e.jsx(w,{sx:{color:"#e91e63",mr:2}}):e.jsx(Y,{sx:{color:"#2196f3",mr:2}}),e.jsxs(o,{children:[e.jsxs(n,{variant:"h6",fontWeight:"bold",children:[s.NOM," ",s.PRENOM]}),e.jsxs(n,{variant:"body2",color:"text.secondary",children:[s.MATRICULE," • ",s.FONCTION," • ",s.GRADE]}),e.jsx(n,{variant:"body2",color:"text.secondary",children:s.NOMSTRUCTURE})]})]}),e.jsx(Z,{onClick:()=>Re(s.IDPERSONNEL),size:"small",children:Q[s.IDPERSONNEL]?e.jsx(Ke,{}):e.jsx(Ze,{})})]}),e.jsxs(Fe,{in:Q[s.IDPERSONNEL],children:[e.jsx(q,{sx:{my:2}}),e.jsx(n,{variant:"subtitle2",fontWeight:"bold",sx:{mb:1},children:"Formations suivies :"}),e.jsx(We,{dense:!0,children:s.FORMATIONS&&s.FORMATIONS.split("|").map((i,x)=>e.jsxs(es,{sx:{pl:0},children:[e.jsx(Be,{sx:{minWidth:32},children:e.jsx(O,{fontSize:"small",color:"action"})}),e.jsx(He,{primary:i,primaryTypographyProps:{fontSize:"0.9rem",component:"span"}})]},x))})]})]})},r)):e.jsxs(o,{textAlign:"center",py:4,children:[e.jsx(k,{color:"action",sx:{fontSize:40,mb:1}}),e.jsxs(n,{variant:"body1",color:"text.secondary",children:["Aucun personnel trouvé pour l'année ",p]})]})}),Ce=()=>e.jsxs(o,{children:[e.jsxs(u,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(u,{item:!0,xs:12,md:6,children:e.jsx(b,{sx:{bgcolor:"#e3f2fd",borderLeft:"4px solid #2196f3",height:"100%"},children:e.jsxs(g,{sx:{textAlign:"center"},children:[e.jsx(Y,{sx:{fontSize:48,color:"#2196f3",mb:1}}),e.jsx(n,{variant:"h3",fontWeight:"bold",color:"#2196f3",children:D.hommes}),e.jsx(n,{variant:"body1",color:"text.secondary",fontWeight:"medium",children:"Hommes"})]})})}),e.jsx(u,{item:!0,xs:12,md:6,children:e.jsx(b,{sx:{bgcolor:"#fce4ec",borderLeft:"4px solid #e91e63",height:"100%"},children:e.jsxs(g,{sx:{textAlign:"center"},children:[e.jsx(w,{sx:{fontSize:48,color:"#e91e63",mb:1}}),e.jsx(n,{variant:"h3",fontWeight:"bold",color:"#e91e63",children:D.femmes}),e.jsx(n,{variant:"body1",color:"text.secondary",fontWeight:"medium",children:"Femmes"})]})})})]}),e.jsx(U,{sx:{p:3,borderRadius:2},children:e.jsx(ee,{options:be,series:ge,type:"bar",height:400})})]}),Me=()=>e.jsxs(o,{children:[e.jsxs(u,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(u,{item:!0,xs:12,md:4,children:e.jsx(b,{sx:{bgcolor:"#e3f2fd",borderLeft:"4px solid #2196f3",height:"100%"},children:e.jsxs(g,{sx:{textAlign:"center"},children:[e.jsx(Y,{sx:{fontSize:48,color:"#2196f3",mb:1}}),e.jsx(n,{variant:"h3",fontWeight:"bold",color:"#2196f3",children:h.reduce((s,r)=>s+(r.HOMMES||0),0)}),e.jsx(n,{variant:"body1",color:"text.secondary",fontWeight:"medium",children:"Total Hommes"})]})})}),e.jsx(u,{item:!0,xs:12,md:4,children:e.jsx(b,{sx:{bgcolor:"#fce4ec",borderLeft:"4px solid #e91e63",height:"100%"},children:e.jsxs(g,{sx:{textAlign:"center"},children:[e.jsx(w,{sx:{fontSize:48,color:"#e91e63",mb:1}}),e.jsx(n,{variant:"h3",fontWeight:"bold",color:"#e91e63",children:h.reduce((s,r)=>s+(r.FEMMES||0),0)}),e.jsx(n,{variant:"body1",color:"text.secondary",fontWeight:"medium",children:"Total Femmes"})]})})}),e.jsx(u,{item:!0,xs:12,md:4,children:e.jsx(b,{sx:{bgcolor:"#e8f5e8",borderLeft:"4px solid #4caf50",height:"100%"},children:e.jsxs(g,{sx:{textAlign:"center"},children:[e.jsx(A,{sx:{fontSize:48,color:"#4caf50",mb:1}}),e.jsx(n,{variant:"h3",fontWeight:"bold",color:"#4caf50",children:h.reduce((s,r)=>s+(r.NOMBRE_PERSONNELS_FORMES||0),0)}),e.jsx(n,{variant:"body1",color:"text.secondary",fontWeight:"medium",children:"Total Général"})]})})})]}),e.jsx(U,{sx:{p:3,borderRadius:2,mb:4},children:e.jsx(ee,{options:Te,series:Oe,type:"bar",height:500})}),e.jsx(se,{sx:{maxHeight:400,border:"1px solid",borderColor:"#f0f0f0",borderRadius:2},children:e.jsxs(te,{stickyHeader:!0,children:[e.jsx(re,{children:e.jsxs(y,{sx:{bgcolor:"#fafafa"},children:[e.jsx(a,{sx:{fontWeight:"bold"},children:"Structure Parente"}),e.jsx(a,{sx:{fontWeight:"bold",textAlign:"center"},children:"Hommes"}),e.jsx(a,{sx:{fontWeight:"bold",textAlign:"center"},children:"Femmes"}),e.jsx(a,{sx:{fontWeight:"bold",textAlign:"center"},children:"Total"})]})}),e.jsx(ne,{children:h.map((s,r)=>e.jsxs(y,{hover:!0,children:[e.jsx(a,{children:e.jsxs(o,{children:[e.jsx(n,{variant:"body1",fontWeight:"500",children:s.ABBREVIATION||s.NOM_STRUCTURE_PARENT}),s.ABBREVIATION&&s.NOM_STRUCTURE_PARENT&&e.jsx(n,{variant:"caption",color:"text.secondary",children:s.NOM_STRUCTURE_PARENT})]})}),e.jsx(a,{align:"center",children:e.jsx(R,{label:s.HOMMES||0,size:"small",sx:{bgcolor:"#2196f3",color:"white",minWidth:40}})}),e.jsx(a,{align:"center",children:e.jsx(R,{label:s.FEMMES||0,size:"small",sx:{bgcolor:"#e91e63",color:"white",minWidth:40}})}),e.jsx(a,{align:"center",children:e.jsx(R,{label:s.NOMBRE_PERSONNELS_FORMES||0,color:"primary",variant:"filled",size:"small",sx:{minWidth:40}})})]},r))})]})})]});return e.jsxs(U,{elevation:0,sx:{p:4,width:"90%",mx:"auto",borderRadius:3,bgcolor:"background.paper",boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.05)",mt:4},children:[e.jsx(u,{item:!0,xs:12,children:e.jsx(U,{sx:{p:0,borderRadius:4,background:"linear-gradient(45deg, #c6daf767, #91adf36f)",color:"black",mb:5},children:e.jsxs(o,{display:"flex",alignItems:"center",padding:1,children:[e.jsx(ve,{sx:{bgcolor:"rgba(244, 247, 249, 0.93)",mr:2,width:60,height:60},children:e.jsx(Le,{sx:{fontSize:32,color:"blue"}})}),e.jsxs(o,{children:[e.jsx(n,{variant:"h4",fontWeight:700,sx:{color:"blue"},children:"Effectuez vos requêtes"}),e.jsx(n,{variant:"body1",sx:{opacity:.9},children:"Requêtes liées aux apprenant et modules du centre d'excellence"})]})]})})}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx($,{color:"primary",sx:{fontSize:36,mr:2}}),e.jsxs(o,{children:[e.jsx(n,{variant:"h5",fontWeight:"bold",color:"primary",children:"Requêtes sur le centre d'excellence"}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Consultez les modules, le personnel formé et les statistiques"})]})]}),e.jsx(q,{sx:{my:3}}),e.jsxs(Ue,{value:t,onChange:Ee,variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider",mb:3},children:[e.jsx(z,{label:"Modules par Année",icon:e.jsx(O,{}),iconPosition:"start",sx:{textTransform:"none",minHeight:"auto",py:1}}),e.jsx(z,{label:"Personnel Formé",icon:e.jsx(A,{}),iconPosition:"start",sx:{textTransform:"none",minHeight:"auto",py:1}}),e.jsx(z,{label:"Statistiques Genre",icon:e.jsx(P,{}),iconPosition:"start",sx:{textTransform:"none",minHeight:"auto",py:1}}),e.jsx(z,{label:"Effectifs par Structure",icon:e.jsx(_,{}),iconPosition:"start",sx:{textTransform:"none",minHeight:"auto",py:1}})]}),t===0&&e.jsxs(o,{children:[e.jsxs(n,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center"},children:[e.jsx(O,{sx:{mr:1}}),"Liste des modules par année académique"]}),e.jsxs(F,{fullWidth:!0,sx:{mb:2,bgcolor:"#f9f9f9"},children:[e.jsx(B,{children:"Année académique"}),e.jsx(W,{value:E,onChange:s=>me(s.target.value),label:"Année académique",children:c.map(s=>e.jsx(H,{value:s,children:s},s))})]})]}),t===1&&e.jsxs(o,{children:[e.jsxs(n,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center"},children:[e.jsx(A,{sx:{mr:1}}),"Personnel formé par année académique"]}),e.jsxs(F,{fullWidth:!0,sx:{mb:2,bgcolor:"#f9f9f9"},children:[e.jsx(B,{children:"Année académique"}),e.jsx(W,{value:p,onChange:s=>he(s.target.value),label:"Année académique",children:c.map(s=>e.jsx(H,{value:s,children:s},s))})]})]}),t===2&&e.jsxs(o,{children:[e.jsxs(n,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center"},children:[e.jsx(P,{sx:{mr:1}}),"Statistiques Hommes / Femmes par année académique"]}),e.jsxs(F,{fullWidth:!0,sx:{mb:2,bgcolor:"#f9f9f9"},children:[e.jsx(B,{children:"Année académique"}),e.jsx(W,{value:S,onChange:s=>fe(s.target.value),label:"Année académique",children:c.map(s=>e.jsx(H,{value:s,children:s},s))})]})]}),t===3&&e.jsxs(o,{children:[e.jsxs(n,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center"},children:[e.jsx(_,{sx:{mr:1}}),"Personnels formés par Structure Parente"]}),e.jsxs(F,{fullWidth:!0,sx:{mb:2,bgcolor:"#f9f9f9"},children:[e.jsx(B,{children:"Année académique"}),e.jsx(W,{value:N,onChange:s=>ue(s.target.value),label:"Année académique",children:c.map(s=>e.jsx(H,{value:s,children:s},s))})]})]}),e.jsx(o,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(rs,{onClick:je,startIcon:m?e.jsx(qe,{size:20,color:"inherit"}):e.jsx($e,{}),disabled:m,children:m?"Traitement...":"Exécuter la requête"})}),e.jsxs(ke,{open:oe,onClose:()=>M(!1),fullWidth:!0,maxWidth:"xl",PaperProps:{sx:{borderRadius:3,boxShadow:"0px 8px 24px rgba(0, 0, 0, 0.1)"}},children:[e.jsxs(Ye,{sx:{bgcolor:"#f5f5f5",color:"text.primary",display:"flex",justifyContent:"space-between",alignItems:"center",py:2,pr:2,borderBottom:"1px solid #e0e0e0"},children:[e.jsxs(o,{display:"flex",alignItems:"center",children:[t===0&&e.jsx(O,{sx:{mr:1.5,fontSize:28,color:"primary.main"}}),t===1&&e.jsx(A,{sx:{mr:1.5,fontSize:28,color:"primary.main"}}),t===2&&e.jsx(P,{sx:{mr:1.5,fontSize:28,color:"primary.main"}}),t===3&&e.jsx(_,{sx:{mr:1.5,fontSize:28,color:"primary.main"}}),e.jsxs(n,{variant:"h6",fontWeight:"medium",children:[t===0&&`Modules de l'année ${E}`,t===1&&`Personnel formé - Année ${p}`,t===2&&`Statistiques Hommes / Femmes - Année ${S}`,t===3&&`Personnels formés par Structure - Année ${N}`]})]}),e.jsx(Z,{onClick:()=>M(!1),size:"small",sx:{color:"text.secondary"},children:e.jsx(Ge,{})})]}),e.jsxs(we,{sx:{py:3},children:[e.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsxs(o,{children:[e.jsxs(n,{variant:"subtitle1",fontWeight:"medium",children:[t===0&&`${j.length} modules trouvé(s)`,t===1&&`${j.length} personnels trouvé(s)`,t===2&&"Répartition par genre",t===3&&`${h.length} structure(s) parente(s) trouvée(s)`]}),e.jsxs(n,{variant:"body2",color:"text.secondary",children:[t===0&&`Année académique: ${E}`,t===1&&`Année académique: ${p}`,t===2&&`Année académique: ${S}`,t===3&&`Année académique: ${N}`]})]}),e.jsx(R,{label:t===0?E:t===1?p:t===2?S:N,color:"primary",variant:"outlined",icon:e.jsx(Ve,{fontSize:"small"}),sx:{fontSize:"0.9rem",fontWeight:500,py:1}})]}),e.jsx(q,{sx:{my:2}}),t===0&&Ae(),t===1&&ye(),t===2&&Ce(),t===3&&Me()]})]}),e.jsx(Qe,{anchorOrigin:{vertical:"top",horizontal:"right"},open:ae,onClose:K,autoHideDuration:5e3,children:e.jsx(ts,{onClose:K,severity:ce,iconMapping:{success:t===0?e.jsx(O,{fontSize:"inherit"}):t===1?e.jsx(A,{fontSize:"inherit"}):t===2?e.jsx(P,{fontSize:"inherit"}):t===3?e.jsx(_,{fontSize:"inherit"}):e.jsx($,{fontSize:"inherit"}),error:e.jsx(k,{fontSize:"inherit"}),info:e.jsx($,{fontSize:"inherit"})},sx:{boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.05)",borderRadius:2,minWidth:300,bgcolor:"background.paper"},children:e.jsx(n,{fontWeight:500,children:ie})})})]})};export{Ls as default};
