import{r as x,j as e,B as i,H as Me,J as T,z as S,A as le,F as Re,T as l,v as N,aB as J,D as ge,G as g,y as t,I as w,K as De,V as Se,C as pe,w as Oe,s as Ne,a9 as we,x as G,Y as f,u as nr,Z as lr,az as ir,aA as ar}from"./index-zHPv1lze.js";import{a as $}from"./index-C3O71W1x.js";import{C as Fe}from"./Container-iQUVt9w4.js";import{F as ve,S as Ae}from"./Select-DCG_CkE0.js";import{M as X}from"./MenuItem-D-1uk7AZ.js";import{T as A}from"./TextField-DNVhVnCv.js";import{I as me}from"./InputAdornment-BgDE6Kz5.js";import{C as ze,G as cr}from"./plananuel-IOcjCXI3.js";import{A as ke}from"./Alert-D6te_eKs.js";import{C as je}from"./CalendarToday-BYxDq_1X.js";import{C as We}from"./CircularProgress-BHFhENdB.js";import{D as Ue}from"./Description-Dd72SfDg.js";import{A as Le}from"./index-voob9auG.js";import{G as Be}from"./Group-CKNX0Zix.js";import{L as Pe}from"./LocationOn-We7TmFLi.js";import{F as Ce}from"./FormControlLabel-D_GYa5-T.js";import{C as Te}from"./Checkbox-BNRiEFgI.js";import{B as _}from"./Button-0T1tR8_c.js";import{E as $e}from"./ExpandLess-BVSXxMnp.js";import{E as Je}from"./ExpandMore-DWiDQC_Y.js";import{S as Ge}from"./Save-ByVVUHNY.js";import{C as Ye}from"./Cancel-ogBAkz-m.js";import{D as Ve}from"./Delete-DRqEtRSt.js";import{I as He}from"./Info-BG_pDBBb.js";import{a as Qe,D as qe}from"./DialogContent-COvIddmc.js";import{D as Xe}from"./DialogTitle-CCgKuUmv.js";import{W as _e}from"./Warning-Dm-AjjkC.js";import{D as Ke}from"./DialogContentText-B4ik-x_z.js";import{D as Ze}from"./DialogActions-CZ9LuKoL.js";import{A as sr,a as dr,C as xr}from"./AttachMoney-BnH0h83A.js";import{E as or}from"./Event-DCg_30F7.js";import{B as ur}from"./Business-DP4Oq-gt.js";import{P as rr}from"./Person-CVTBdQV4.js";import{A as hr}from"./Autocomplete-DkJdCr17.js";import{A as tr}from"./AutoStories-fwsOt3cY.js";import{E as pr,S as gr,H as mr,P as jr,A as br}from"./SwapHoriz-B-zTNYW6.js";import"./OutlinedInput-C5vYvqQm.js";import"./useFormControl-BwsGWz84.js";import"./FormHelperText-BXMwkblB.js";import"./History-CpgLUztO.js";import"./CheckCircle-BB09QyVE.js";import"./Upload-C6xz4iyc.js";import"./Archive-D2QOqqZQ.js";import"./Close-DS868zx3.js";import"./SwitchBase-CEgujy3G.js";import"./ButtonGroupButtonContext-BYVHV5Ft.js";T(S);T(pe);const fr=Ne(N)(({theme:m,active:d})=>({minWidth:40,justifyContent:"center",backgroundColor:d?t("#1976d2",.1):"transparent",color:d?"#1976d2":m.palette.text.secondary,borderColor:d?"#1976d2":t("#000",.1),fontWeight:d?600:400,"&:hover":{backgroundColor:d?t("#1976d2",.15):t("#000",.05)}})),Ir=()=>{const[m,d]=x.useState([]),[R,Z]=x.useState([]),[E,Y]=x.useState(""),[ie,Q]=x.useState(""),[M,W]=x.useState([]),[U,k]=x.useState(null),[F,ee]=x.useState(""),[se,ae]=x.useState(!1),[re,D]=x.useState(null),[V,te]=x.useState({open:!1,formationId:null,formationIntitule:""}),L="",B=["JAN","FEV","MAR","AVR","MAI","JUI","JUL","AOU","SEP","OCT","NOV","DECE"],ce=["Janvier","FÃ©vrier","Mars","Avril","Mai","Juin","Juillet","AoÃ»t","Septembre","Octobre","Novembre","DÃ©cembre"];x.useEffect(()=>{(async()=>{const p=localStorage.getItem("token");try{const o=await $.get(`${L}/listeplantrienal`,{headers:{Authorization:`Bearer ${p}`}});Z(o.data)}catch(o){console.error("Erreur lors de la rÃ©cupÃ©ration des triennaux:",o),f.error("Erreur lors de la rÃ©cupÃ©ration des triennaux.")}})()},[]);const H=s=>{const p=R.find(o=>o.ANNEE1===s.target.value);p&&(Q(p.ANNEE1),Y(p.IDPLAN),W([p.ANNEE1,p.ANNEE2,p.ANNEE3]))};x.useEffect(()=>{(async()=>{if(!E)return;ae(!0);const p=localStorage.getItem("token");try{const o=await $.get(`${L}/listeformationpasserelle?triennal=${E}`,{headers:{Authorization:`Bearer ${p}`}});d(o.data)}catch(o){f.error("Erreur lors de la rÃ©cupÃ©ration des formations."),console.error("Erreur lors de la rÃ©cupÃ©ration des formations:",o)}finally{ae(!1)}})()},[E]);const P=m.filter(s=>F?(s.INTITULE||"").toLowerCase().includes(F.toLowerCase()):!0),de=s=>{k(s),D(s)},be=()=>{k(null),D(null)},fe=async s=>{const p=localStorage.getItem("token"),o=m.find(r=>r.IDFORMATIONM===s);try{await $.patch(`${L}/modifierformations`,o,{headers:{Authorization:`Bearer ${p}`}}),k(null),D(null),f.success("Modification enregistrÃ©e avec succÃ¨s.")}catch(r){console.error("Erreur lors de la mise Ã  jour:",r),f.error("Erreur lors de l'enregistrement des modifications.")}},z=(s,p,o)=>{d(m.map(r=>r.IDFORMATIONM===s?{...r,[p]:o}:r))},q=(s,p,o)=>{d(m.map(r=>r.IDFORMATIONM===s?{...r,[p]:o?1:null}:r))},Ie=(s,p)=>{te({open:!0,formationId:s,formationIntitule:p})},oe=()=>{te({open:!1,formationId:null,formationIntitule:""})},ue=async()=>{const{formationId:s}=V,p=localStorage.getItem("token");try{await $.delete(`${L}/supprimerformation`,{headers:{Authorization:`Bearer ${p}`},data:{id:s}}),d(m.filter(o=>o.IDFORMATIONM!==s)),f.success("Formation supprimÃ©e avec succÃ¨s.")}catch(o){console.error("Erreur lors de la suppression:",o),f.error("Erreur lors de la suppression de la formation.")}finally{oe()}},he=s=>{D(re===s?null:s)},xe=s=>B.filter((p,o)=>s[p]===1).map(p=>p);return e.jsxs(i,{sx:{width:"100%",minHeight:"100vh",bgcolor:"#f8faff",py:4},children:[e.jsx(Me,{position:"top-right",autoClose:3e3}),e.jsx(Fe,{maxWidth:"xl",children:e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(S,{elevation:0,sx:{p:{xs:3,md:4},borderRadius:4,background:"linear-gradient(145deg, #ffffff 0%, #f8faff 100%)",boxShadow:"0 10px 40px rgba(0,0,0,0.03)",border:"1px solid",borderColor:"rgba(25, 118, 210, 0.1)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #1976d2, #64b5f6, #1976d2)"}},children:[e.jsxs(i,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,flexWrap:"wrap",gap:2,children:[e.jsxs(i,{display:"flex",alignItems:"center",children:[e.jsx(le,{sx:{width:56,height:56,background:"linear-gradient(135deg, #1976d2 0%, #64b5f6 100%)",boxShadow:"0 10px 20px rgba(25, 118, 210, 0.2)",mr:2},children:e.jsx(Re,{sx:{fontSize:28,color:"white"}})}),e.jsxs(i,{children:[e.jsx(l,{variant:"h5",fontWeight:"700",color:"#1a237e",children:"AXE 1: CENTRE D'EXCELLENCE"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Gestion et modification des formations"})]})]}),e.jsx(N,{label:"Mode Ã©dition",color:"primary",variant:"outlined",icon:e.jsx(J,{}),sx:{borderRadius:2}})]}),e.jsx(ge,{sx:{mb:3,borderColor:"rgba(25, 118, 210, 0.1)"}}),e.jsxs(g,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(T.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},children:e.jsxs(S,{elevation:0,sx:{p:2,borderRadius:3,border:"1px solid",borderColor:"rgba(25, 118, 210, 0.1)",bgcolor:t("#1976d2",.02)},children:[e.jsx(l,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,sx:{fontWeight:600},children:"ðŸ“… PLAN TRIENNAL"}),e.jsx(ve,{fullWidth:!0,size:"small",children:e.jsxs(Ae,{value:ie,onChange:H,displayEmpty:!0,sx:{borderRadius:2,bgcolor:"white"},children:[e.jsx(X,{value:"",disabled:!0,children:"SÃ©lectionner un plan triennal"}),R.map((s,p)=>e.jsx(X,{value:s.ANNEE1,children:`${s.ANNEE1} - ${s.ANNEE2} - ${s.ANNEE3}`},p))]})})]})})}),e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(T.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3},children:e.jsxs(S,{elevation:0,sx:{p:2,borderRadius:3,border:"1px solid",borderColor:"rgba(25, 118, 210, 0.1)",bgcolor:t("#1976d2",.02)},children:[e.jsx(l,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,sx:{fontWeight:600},children:"ðŸ” RECHERCHE"}),e.jsx(A,{placeholder:"Rechercher par intitulÃ©...",value:F,onChange:s=>ee(s.target.value),fullWidth:!0,size:"small",InputProps:{startAdornment:e.jsx(me,{position:"start",children:e.jsx(De,{color:"primary"})}),endAdornment:F&&e.jsx(me,{position:"end",children:e.jsx(w,{size:"small",onClick:()=>ee(""),children:e.jsx(ze,{fontSize:"small"})})})},sx:{bgcolor:"white",borderRadius:2}})]})})})]}),!E&&e.jsx(Se,{in:!0,children:e.jsx(ke,{severity:"info",sx:{mb:3,borderRadius:2,bgcolor:t("#1976d2",.05),border:"1px solid",borderColor:t("#1976d2",.2)},icon:e.jsx(je,{}),children:"Veuillez sÃ©lectionner un plan triennal pour afficher les formations"})}),se&&e.jsx(i,{display:"flex",justifyContent:"center",alignItems:"center",py:8,children:e.jsx(We,{})}),!se&&E&&e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:P.length===0?e.jsxs(S,{sx:{p:6,textAlign:"center",bgcolor:t("#1976d2",.02),borderRadius:3,border:"1px dashed",borderColor:t("#1976d2",.3)},children:[e.jsx(Ue,{sx:{fontSize:48,color:t("#1976d2",.3),mb:2}}),e.jsx(l,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Aucune formation trouvÃ©e"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:F?"Aucun rÃ©sultat pour votre recherche":"Aucune formation pour ce plan triennal"})]}):e.jsx(g,{container:!0,spacing:3,children:e.jsx(Le,{children:P.map((s,p)=>{const o=xe(s),r=re===s.IDFORMATIONM,c=U===s.IDFORMATIONM;return e.jsx(g,{item:!0,xs:12,md:6,lg:4,children:e.jsx(T.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{delay:p*.05},whileHover:{y:-4},children:e.jsxs(pe,{sx:{height:"100%",borderRadius:3,border:"1px solid",borderColor:c?t("#1976d2",.5):o.length>0?t("#4caf50",.3):"rgba(0,0,0,0.08)",boxShadow:c?"0 8px 20px rgba(25, 118, 210, 0.15)":"0 4px 12px rgba(0,0,0,0.05)",transition:"all 0.3s ease",position:"relative",overflow:"visible",bgcolor:c?t("#1976d2",.02):"white"},children:[c&&e.jsx(N,{size:"small",icon:e.jsx(J,{}),label:"Ã‰dition en cours",color:"primary",sx:{position:"absolute",top:-10,right:10,zIndex:1,boxShadow:"0 4px 10px rgba(25, 118, 210, 0.3)"}}),e.jsxs(Oe,{sx:{p:3},children:[e.jsxs(i,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(le,{sx:{width:48,height:48,bgcolor:t("#1976d2",.1),color:"#1976d2",mr:2},children:e.jsx(Re,{})}),e.jsxs(i,{flex:1,children:[c?e.jsx(A,{value:s.INTITULE||"",onChange:a=>z(s.IDFORMATIONM,"INTITULE",a.target.value),size:"small",fullWidth:!0,placeholder:"IntitulÃ© de la formation",sx:{mb:1}}):e.jsx(l,{variant:"h6",fontWeight:"600",color:"#1a237e",children:s.INTITULE||"Sans intitulÃ©"}),e.jsxs(i,{display:"flex",gap:1,alignItems:"center",children:[e.jsx(N,{size:"small",icon:e.jsx(je,{}),label:`ID: ${s.IDFORMATIONM}`,variant:"outlined",sx:{borderRadius:1.5}}),o.length>0&&e.jsx(N,{size:"small",label:`${o.length} mois`,color:"success",sx:{borderRadius:1.5}})]})]})]}),e.jsxs(g,{container:!0,spacing:1.5,sx:{mb:2},children:[e.jsx(g,{item:!0,xs:6,children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Be,{sx:{fontSize:16,color:"text.secondary"}}),c?e.jsx(A,{value:s.CIBLES||"",onChange:a=>z(s.IDFORMATIONM,"CIBLES",a.target.value),size:"small",placeholder:"Cibles",fullWidth:!0}):e.jsx(l,{variant:"body2",color:"text.secondary",noWrap:!0,children:s.CIBLES||"Non spÃ©cifiÃ©"})]})}),e.jsx(g,{item:!0,xs:6,children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Pe,{sx:{fontSize:16,color:"text.secondary"}}),c?e.jsx(A,{value:s.LIEU||"",onChange:a=>z(s.IDFORMATIONM,"LIEU",a.target.value),size:"small",placeholder:"Lieu",fullWidth:!0}):e.jsx(l,{variant:"body2",color:"text.secondary",noWrap:!0,children:s.LIEU||"Non spÃ©cifiÃ©"})]})})]}),!r&&!c&&e.jsx(i,{sx:{mb:2},children:e.jsx(i,{display:"flex",gap:.5,flexWrap:"wrap",children:B.map((a,u)=>e.jsx(fr,{label:a,size:"small",active:s[a]===1,variant:s[a]===1?"filled":"outlined"},a))})}),e.jsx(we,{in:r||c,children:e.jsxs(i,{sx:{mt:2},children:[e.jsx(ge,{sx:{my:2}}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"primary",gutterBottom:!0,children:"Objectifs pÃ©dagogiques"}),c?e.jsx(A,{value:s.OBJECTIFS||"",onChange:a=>z(s.IDFORMATIONM,"OBJECTIFS",a.target.value),size:"small",fullWidth:!0,multiline:!0,rows:2,placeholder:"Objectifs de la formation",sx:{mb:2}}):e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2,whiteSpace:"pre-wrap"},children:s.OBJECTIFS||"Aucun objectif renseignÃ©"}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"primary",gutterBottom:!0,children:"RÃ©sultats attendus"}),c?e.jsx(A,{value:s.RESULTATATTENDU||"",onChange:a=>z(s.IDFORMATIONM,"RESULTATATTENDU",a.target.value),size:"small",fullWidth:!0,multiline:!0,rows:2,placeholder:"RÃ©sultats attendus",sx:{mb:2}}):e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2,whiteSpace:"pre-wrap"},children:s.RESULTATATTENDU||"Aucun rÃ©sultat renseignÃ©"}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"primary",gutterBottom:!0,children:"Prestataire pÃ©dagogique"}),c?e.jsx(A,{value:s.PRESTATAIREPEDAGOGIQUE||"",onChange:a=>z(s.IDFORMATIONM,"PRESTATAIREPEDAGOGIQUE",a.target.value),size:"small",fullWidth:!0,placeholder:"Prestataire",sx:{mb:2}}):e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:s.PRESTATAIREPEDAGOGIQUE||"Non spÃ©cifiÃ©"}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"primary",gutterBottom:!0,children:"Planification mensuelle"}),e.jsx(i,{display:"flex",gap:.5,flexWrap:"wrap",sx:{mb:2},children:ce.map((a,u)=>e.jsx(Ce,{control:e.jsx(Te,{checked:s[B[u]]===1,onChange:C=>q(s.IDFORMATIONM,B[u],C.target.checked),disabled:!c,size:"small"}),label:a,sx:{width:"45%","& .MuiTypography-root":{fontSize:"0.8rem"}}},u))})]})}),e.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mt:2},children:[e.jsx(i,{children:!c&&e.jsx(_,{size:"small",onClick:()=>he(s.IDFORMATIONM),endIcon:r?e.jsx($e,{}):e.jsx(Je,{}),sx:{textTransform:"none"},children:r?"Voir moins":"Voir plus"})}),e.jsx(i,{display:"flex",gap:1,children:c?e.jsxs(e.Fragment,{children:[e.jsx(G,{title:"Enregistrer",children:e.jsx(w,{onClick:()=>fe(s.IDFORMATIONM),size:"small",sx:{color:"#4caf50",bgcolor:t("#4caf50",.1),"&:hover":{bgcolor:t("#4caf50",.2)}},children:e.jsx(Ge,{fontSize:"small"})})}),e.jsx(G,{title:"Annuler",children:e.jsx(w,{onClick:be,size:"small",sx:{color:"#f44336",bgcolor:t("#f44336",.1),"&:hover":{bgcolor:t("#f44336",.2)}},children:e.jsx(Ye,{fontSize:"small"})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{title:"Modifier",children:e.jsx(w,{onClick:()=>de(s.IDFORMATIONM),size:"small",sx:{color:"#1976d2",bgcolor:t("#1976d2",.1),"&:hover":{bgcolor:t("#1976d2",.2)}},children:e.jsx(J,{fontSize:"small"})})}),e.jsx(G,{title:"Supprimer",children:e.jsx(w,{onClick:()=>Ie(s.IDFORMATIONM,s.INTITULE),size:"small",sx:{color:"#f44336",bgcolor:t("#f44336",.1),"&:hover":{bgcolor:t("#f44336",.2)}},children:e.jsx(Ve,{fontSize:"small"})})})]})})]})]})]})})},s.IDFORMATIONM)})})})}),E&&P.length>0&&e.jsxs(i,{sx:{mt:3,p:2,bgcolor:t("#1976d2",.02),borderRadius:2,border:"1px solid",borderColor:t("#1976d2",.1),display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:2},children:[e.jsxs(i,{display:"flex",alignItems:"center",children:[e.jsx(He,{sx:{color:t("#1976d2",.5),mr:1.5,fontSize:20}}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[P.length," formation(s) trouvÃ©e(s) â€¢ ",U?"Mode Ã©dition actif":"Cliquez sur Modifier pour Ã©diter"]})]}),U&&e.jsx(N,{size:"small",icon:e.jsx(J,{}),label:"Ã‰dition en cours",color:"primary",variant:"outlined"})]})]})})}),e.jsxs(Qe,{open:V.open,onClose:oe,PaperProps:{sx:{borderRadius:3,p:1}},children:[e.jsxs(Xe,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_e,{color:"error"}),e.jsx(l,{variant:"h6",children:"Confirmer la suppression"})]}),e.jsx(qe,{children:e.jsxs(Ke,{children:["ÃŠtes-vous sÃ»r de vouloir supprimer la formation ",e.jsxs("strong",{children:['"',V.formationIntitule,'"']})," ? Cette action est irrÃ©versible."]})}),e.jsxs(Ze,{sx:{p:2,pt:0},children:[e.jsx(_,{onClick:oe,variant:"outlined",sx:{borderRadius:2},children:"Annuler"}),e.jsx(_,{onClick:ue,variant:"contained",color:"error",sx:{borderRadius:2},children:"Supprimer"})]})]})]})};T(S);T(pe);const yr=Ne(N)(({theme:m,active:d})=>({minWidth:40,justifyContent:"center",backgroundColor:d?t("#ed6c02",.1):"transparent",color:d?"#ed6c02":m.palette.text.secondary,borderColor:d?"#ed6c02":t("#000",.1),fontWeight:d?600:400,"&:hover":{backgroundColor:d?t("#ed6c02",.15):t("#000",.05)}})),Er=Ne(N)(({theme:m,active:d})=>({minWidth:60,justifyContent:"center",backgroundColor:d?t("#ed6c02",.1):"transparent",color:d?"#ed6c02":m.palette.text.secondary,borderColor:d?"#ed6c02":t("#000",.1),fontWeight:d?600:400})),vr=()=>{const[m,d]=x.useState([]),[R,Z]=x.useState([]),[E,Y]=x.useState(""),[ie,Q]=x.useState(""),[M,W]=x.useState([]),[U,k]=x.useState(null),[F,ee]=x.useState(""),[se,ae]=x.useState(!1),[re,D]=x.useState(null),[V,te]=x.useState({open:!1,formationId:null,formationIntitule:""}),L="",B=["JAN","FEV","MAR","AVR","MAI","JUI","JUL","AOU","SEP","OCT","NOV","DECE"],ce=["Janvier","FÃ©vrier","Mars","Avril","Mai","Juin","Juillet","AoÃ»t","Septembre","Octobre","Novembre","DÃ©cembre"];x.useEffect(()=>{(async()=>{const c=localStorage.getItem("token");try{const a=await $.get(`${L}/listeplantrienal`,{headers:{Authorization:`Bearer ${c}`}});Z(a.data)}catch(a){console.error("Erreur lors de la rÃ©cupÃ©ration des triennaux:",a),f.error("Erreur lors de la rÃ©cupÃ©ration des triennaux.")}})()},[]),x.useEffect(()=>{(async()=>{if(!E)return;ae(!0);const c=localStorage.getItem("token");try{const a=await $.get(`${L}/listeformationtransversale?triennal=${E}`,{headers:{Authorization:`Bearer ${c}`}});d(a.data);const u=R.find(C=>C.IDPLAN===E);if(u){const C=[u.ANNEE1,u.ANNEE2,u.ANNEE3].filter(I=>I!==0);W(C)}}catch(a){f.error("Erreur lors de la rÃ©cupÃ©ration des formations."),console.error("Erreur lors de la rÃ©cupÃ©ration des formations:",a)}finally{ae(!1)}})()},[E,R]);const H=()=>M.indexOf(ie),P=m.filter(r=>{if(U===r.IDFORMATIONM)return!0;if(ie){const c=H();if(c===-1)return!1;const a=`ANNEE${c+1}`;if(r[a]===null||r[a]===0)return!1}return!(F&&!(r.INTITULE||"").toLowerCase().includes(F.toLowerCase()))}),de=r=>m.findIndex(c=>c.IDFORMATIONM===r),be=r=>{k(r),D(r)},fe=async r=>{const c=localStorage.getItem("token"),a=de(r);if(a===-1){f.error("Formation non trouvÃ©e.");return}const u=m[a];try{await $.patch(`${L}/modifierformations`,u,{headers:{Authorization:`Bearer ${c}`}});const C=[...m];C[a]=u,d(C),k(null),D(null),f.success("Modification enregistrÃ©e avec succÃ¨s.")}catch(C){console.error("Erreur lors de la mise Ã  jour de la formation:",C),f.error("Erreur lors de l'enregistrement des modifications.")}},z=()=>{k(null),D(null)},q=(r,c,a)=>{d(u=>{const C=[...u],I=C.findIndex(j=>j.IDFORMATIONM===r);return I===-1?(f.error("Formation non trouvÃ©e."),u):(C[I][c]=a,C)})},Ie=(r,c,a)=>{d(u=>{const C=[...u],I=C.findIndex(n=>n.IDFORMATIONM===r);if(I===-1)return f.error("Formation non trouvÃ©e."),u;const j=B[c];return C[I][j]=a?1:null,C})},oe=(r,c,a)=>{d(u=>{const C=[...u],I=C.findIndex(n=>n.IDFORMATIONM===r);if(I===-1)return f.error("Formation non trouvÃ©e."),u;const j=C[I];if(a){const n=parseInt(c.replace("ANNEE","")),h=M[n-1];j[c]=h}else j[c]=null;return C})},ue=(r,c)=>{te({open:!0,formationId:r,formationIntitule:c})},he=()=>{te({open:!1,formationId:null,formationIntitule:""})},xe=async()=>{const{formationId:r}=V,c=localStorage.getItem("token");try{await $.delete(`${L}/supprimerformation`,{headers:{Authorization:`Bearer ${c}`},data:{id:r}}),d(m.filter(a=>a.IDFORMATIONM!==r)),f.success("Formation supprimÃ©e avec succÃ¨s.")}catch(a){console.error("Erreur lors de la suppression de la formation:",a),f.error("Erreur lors de la suppression de la formation.")}finally{he()}},s=r=>{D(re===r?null:r)},p=r=>["ANNEE1","ANNEE2","ANNEE3"].filter((c,a)=>r[c]!==null&&r[c]!==0).map((c,a)=>M[a]).filter(Boolean),o=r=>B.filter(c=>r[c]===1);return e.jsxs(i,{sx:{width:"100%",minHeight:"100vh",bgcolor:"#f8faff",py:4},children:[e.jsx(Me,{position:"top-right",autoClose:3e3}),e.jsx(Fe,{maxWidth:"xl",children:e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(S,{elevation:0,sx:{p:{xs:3,md:4},borderRadius:4,background:"linear-gradient(145deg, #ffffff 0%, #f8faff 100%)",boxShadow:"0 10px 40px rgba(0,0,0,0.03)",border:"1px solid",borderColor:"rgba(237, 108, 2, 0.1)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #ed6c02, #ff9800, #ed6c02)"}},children:[e.jsxs(i,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,flexWrap:"wrap",gap:2,children:[e.jsxs(i,{display:"flex",alignItems:"center",children:[e.jsx(le,{sx:{width:56,height:56,background:"linear-gradient(135deg, #ed6c02 0%, #ff9800 100%)",boxShadow:"0 10px 20px rgba(237, 108, 2, 0.2)",mr:2},children:e.jsx(Re,{sx:{fontSize:28,color:"white"}})}),e.jsxs(i,{children:[e.jsx(l,{variant:"h5",fontWeight:"700",color:"#1a237e",children:"AXE 2: FORMATIONS PONCTUELLES"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"A. Formations Transversales - Gestion et modification"})]})]}),e.jsx(N,{label:"Mode Ã©dition",color:"warning",variant:"outlined",icon:e.jsx(J,{}),sx:{borderRadius:2}})]}),e.jsx(ge,{sx:{mb:3,borderColor:"rgba(237, 108, 2, 0.1)"}}),e.jsxs(g,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(g,{item:!0,xs:12,md:4,children:e.jsx(T.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},children:e.jsxs(S,{elevation:0,sx:{p:2,borderRadius:3,border:"1px solid",borderColor:"rgba(237, 108, 2, 0.1)",bgcolor:t("#ed6c02",.02)},children:[e.jsx(l,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,sx:{fontWeight:600},children:"ðŸ“… PLAN TRIENNAL"}),e.jsx(ve,{fullWidth:!0,size:"small",children:e.jsxs(Ae,{value:E,onChange:r=>{Y(r.target.value),Q("")},displayEmpty:!0,sx:{borderRadius:2,bgcolor:"white"},children:[e.jsx(X,{value:"",disabled:!0,children:"SÃ©lectionner un plan"}),R.map(r=>e.jsx(X,{value:r.IDPLAN,children:`${r.ANNEE1} - ${r.ANNEE2} - ${r.ANNEE3}`},r.IDPLAN))]})})]})})}),e.jsx(g,{item:!0,xs:12,md:4,children:e.jsx(T.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.25},children:e.jsxs(S,{elevation:0,sx:{p:2,borderRadius:3,border:"1px solid",borderColor:"rgba(237, 108, 2, 0.1)",bgcolor:t("#ed6c02",.02)},children:[e.jsx(l,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,sx:{fontWeight:600},children:"ðŸ“† ANNÃ‰E"}),e.jsx(ve,{fullWidth:!0,size:"small",children:e.jsxs(Ae,{value:ie,onChange:r=>Q(r.target.value),displayEmpty:!0,disabled:!E,sx:{borderRadius:2,bgcolor:"white"},children:[e.jsx(X,{value:"",children:"Toutes les annÃ©es"}),M.map(r=>e.jsx(X,{value:r,children:r},r))]})})]})})}),e.jsx(g,{item:!0,xs:12,md:4,children:e.jsx(T.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3},children:e.jsxs(S,{elevation:0,sx:{p:2,borderRadius:3,border:"1px solid",borderColor:"rgba(237, 108, 2, 0.1)",bgcolor:t("#ed6c02",.02)},children:[e.jsx(l,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,sx:{fontWeight:600},children:"ðŸ” RECHERCHE"}),e.jsx(A,{placeholder:"Rechercher par intitulÃ©...",value:F,onChange:r=>ee(r.target.value),fullWidth:!0,size:"small",InputProps:{startAdornment:e.jsx(me,{position:"start",children:e.jsx(De,{sx:{color:"#ed6c02"}})}),endAdornment:F&&e.jsx(me,{position:"end",children:e.jsx(w,{size:"small",onClick:()=>ee(""),children:e.jsx(ze,{fontSize:"small"})})})},sx:{bgcolor:"white",borderRadius:2}})]})})})]}),!E&&e.jsx(Se,{in:!0,children:e.jsx(ke,{severity:"info",sx:{mb:3,borderRadius:2,bgcolor:t("#ed6c02",.05),border:"1px solid",borderColor:t("#ed6c02",.2)},icon:e.jsx(je,{sx:{color:"#ed6c02"}}),children:"Veuillez sÃ©lectionner un plan triennal pour afficher les formations"})}),se&&e.jsx(i,{display:"flex",justifyContent:"center",alignItems:"center",py:8,children:e.jsx(We,{sx:{color:"#ed6c02"}})}),!se&&E&&e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:P.length===0?e.jsxs(S,{sx:{p:6,textAlign:"center",bgcolor:t("#ed6c02",.02),borderRadius:3,border:"1px dashed",borderColor:t("#ed6c02",.3)},children:[e.jsx(Ue,{sx:{fontSize:48,color:t("#ed6c02",.3),mb:2}}),e.jsx(l,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Aucune formation trouvÃ©e"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:F?"Aucun rÃ©sultat pour votre recherche":"Aucune formation pour ce plan triennal"})]}):e.jsx(g,{container:!0,spacing:3,children:e.jsx(Le,{children:P.map((r,c)=>{const a=re===r.IDFORMATIONM,u=U===r.IDFORMATIONM,C=p(r),I=o(r);return e.jsx(g,{item:!0,xs:12,md:6,lg:4,children:e.jsx(T.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{delay:c*.05},whileHover:{y:-4},children:e.jsxs(pe,{sx:{height:"100%",borderRadius:3,border:"1px solid",borderColor:u?t("#ed6c02",.5):C.length>0?t("#4caf50",.3):"rgba(0,0,0,0.08)",boxShadow:u?"0 8px 20px rgba(237, 108, 2, 0.15)":"0 4px 12px rgba(0,0,0,0.05)",transition:"all 0.3s ease",position:"relative",overflow:"visible",bgcolor:u?t("#ed6c02",.02):"white"},children:[u&&e.jsx(N,{size:"small",icon:e.jsx(J,{}),label:"Ã‰dition en cours",color:"warning",sx:{position:"absolute",top:-10,right:10,zIndex:1,boxShadow:"0 4px 10px rgba(237, 108, 2, 0.3)"}}),e.jsxs(Oe,{sx:{p:3},children:[e.jsxs(i,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(le,{sx:{width:48,height:48,bgcolor:t("#ed6c02",.1),color:"#ed6c02",mr:2},children:e.jsx(Re,{})}),e.jsxs(i,{flex:1,children:[u?e.jsx(A,{value:r.INTITULE||"",onChange:j=>q(r.IDFORMATIONM,"INTITULE",j.target.value),size:"small",fullWidth:!0,placeholder:"IntitulÃ© de la formation",sx:{mb:1}}):e.jsx(l,{variant:"h6",fontWeight:"600",color:"#1a237e",children:r.INTITULE||"Sans intitulÃ©"}),e.jsxs(i,{display:"flex",gap:1,alignItems:"center",flexWrap:"wrap",children:[e.jsx(N,{size:"small",icon:e.jsx(je,{}),label:`ID: ${r.IDFORMATIONM} `,variant:"outlined",sx:{borderRadius:1.5}}),C.length>0&&e.jsx(N,{size:"small",label:`${C.length} annÃ©e(s)`,color:"success",sx:{borderRadius:1.5}}),I.length>0&&e.jsx(N,{size:"small",label:`${I.length} mois`,color:"info",sx:{borderRadius:1.5}})]})]})]}),e.jsxs(g,{container:!0,spacing:1.5,sx:{mb:2},children:[e.jsx(g,{item:!0,xs:6,children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Be,{sx:{fontSize:16,color:"text.secondary"}}),u?e.jsx(A,{value:r.CIBLES||"",onChange:j=>q(r.IDFORMATIONM,"CIBLES",j.target.value),size:"small",placeholder:"Cibles",fullWidth:!0}):e.jsx(l,{variant:"body2",color:"text.secondary",noWrap:!0,children:r.CIBLES||"Non spÃ©cifiÃ©"})]})}),e.jsx(g,{item:!0,xs:6,children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Pe,{sx:{fontSize:16,color:"text.secondary"}}),u?e.jsx(A,{value:r.LIEU||"",onChange:j=>q(r.IDFORMATIONM,"LIEU",j.target.value),size:"small",placeholder:"Lieu",fullWidth:!0}):e.jsx(l,{variant:"body2",color:"text.secondary",noWrap:!0,children:r.LIEU||"Non spÃ©cifiÃ©"})]})}),e.jsx(g,{item:!0,xs:6,children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(sr,{sx:{fontSize:16,color:"text.secondary"}}),u?e.jsx(A,{value:r.MONTANT||"",onChange:j=>q(r.IDFORMATIONM,"MONTANT",j.target.value),size:"small",placeholder:"Montant",type:"number",fullWidth:!0}):e.jsx(l,{variant:"body2",color:"text.secondary",noWrap:!0,children:r.MONTANT?`${r.MONTANT} FCFA`:"Non spÃ©cifiÃ©"})]})}),e.jsx(g,{item:!0,xs:6,children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(or,{sx:{fontSize:16,color:"text.secondary"}}),u?e.jsx(A,{value:r.PERIODE||"",onChange:j=>q(r.IDFORMATIONM,"PERIODE",j.target.value),size:"small",placeholder:"PÃ©riode",fullWidth:!0}):e.jsx(l,{variant:"body2",color:"text.secondary",noWrap:!0,children:r.PERIODE||"Non spÃ©cifiÃ©"})]})})]}),!a&&!u&&e.jsxs(i,{sx:{mb:2},children:[e.jsx(l,{variant:"caption",color:"text.secondary",gutterBottom:!0,display:"block",children:"Mois prÃ©vus:"}),e.jsx(i,{display:"flex",gap:.5,flexWrap:"wrap",sx:{mb:1.5},children:B.map(j=>e.jsx(yr,{label:j,size:"small",active:r[j]===1,variant:r[j]===1?"filled":"outlined"},j))}),e.jsx(l,{variant:"caption",color:"text.secondary",gutterBottom:!0,display:"block",children:"AnnÃ©es prÃ©vues:"}),e.jsx(i,{display:"flex",gap:.5,flexWrap:"wrap",children:M.map((j,n)=>{const h=`ANNEE${n+1}`,v=r[h]!==null&&r[h]!==0;return e.jsx(Er,{label:j,size:"small",active:v,variant:v?"filled":"outlined"},j)})})]}),e.jsx(we,{in:a||u,children:e.jsxs(i,{sx:{mt:2},children:[e.jsx(ge,{sx:{my:2}}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"warning",gutterBottom:!0,children:"Objectifs pÃ©dagogiques"}),u?e.jsx(A,{value:r.OBJECTIFS||"",onChange:j=>q(r.IDFORMATIONM,"OBJECTIFS",j.target.value),size:"small",fullWidth:!0,multiline:!0,rows:2,placeholder:"Objectifs de la formation",sx:{mb:2}}):e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2,whiteSpace:"pre-wrap"},children:r.OBJECTIFS||"Aucun objectif renseignÃ©"}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"warning",gutterBottom:!0,children:"RÃ©sultats attendus"}),u?e.jsx(A,{value:r.RESULTATATTENDU||"",onChange:j=>q(r.IDFORMATIONM,"RESULTATATTENDU",j.target.value),size:"small",fullWidth:!0,multiline:!0,rows:2,placeholder:"RÃ©sultats attendus",sx:{mb:2}}):e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2,whiteSpace:"pre-wrap"},children:r.RESULTATATTENDU||"Aucun rÃ©sultat renseignÃ©"}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"warning",gutterBottom:!0,children:"Prestataire pÃ©dagogique"}),u?e.jsx(A,{value:r.PRESTATAIREPEDAGOGIQUE||"",onChange:j=>q(r.IDFORMATIONM,"PRESTATAIREPEDAGOGIQUE",j.target.value),size:"small",fullWidth:!0,placeholder:"Prestataire",sx:{mb:2}}):e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:r.PRESTATAIREPEDAGOGIQUE||"Non spÃ©cifiÃ©"}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"warning",gutterBottom:!0,children:"Planification mensuelle"}),e.jsx(g,{container:!0,spacing:1,sx:{mb:2},children:ce.map((j,n)=>e.jsx(g,{item:!0,xs:6,sm:4,children:e.jsx(Ce,{control:e.jsx(Te,{checked:r[B[n]]===1,onChange:h=>Ie(r.IDFORMATIONM,n,h.target.checked),disabled:!u,size:"small",sx:{color:t("#ed6c02",.5),"&.Mui-checked":{color:"#ed6c02"}}}),label:j,sx:{width:"100%","& .MuiTypography-root":{fontSize:"0.8rem"}}})},n))}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"warning",gutterBottom:!0,children:"Planification annuelle"}),e.jsx(i,{sx:{mb:2},children:M.map((j,n)=>{const h=`ANNEE${n+1}`;return e.jsx(Ce,{control:e.jsx(Te,{checked:r[h]!==null&&r[h]!==0,onChange:v=>oe(r.IDFORMATIONM,h,v.target.checked),disabled:!u,size:"small",sx:{color:t("#ed6c02",.5),"&.Mui-checked":{color:"#ed6c02"}}}),label:`AnnÃ©e ${n+1} : ${j}`,sx:{display:"block",mb:.5}},j)})})]})}),e.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mt:2},children:[e.jsx(i,{children:!u&&e.jsx(_,{size:"small",onClick:()=>s(r.IDFORMATIONM),endIcon:a?e.jsx($e,{}):e.jsx(Je,{}),sx:{textTransform:"none",color:"#ed6c02"},children:a?"Voir moins":"Voir plus"})}),e.jsx(i,{display:"flex",gap:1,children:u?e.jsxs(e.Fragment,{children:[e.jsx(G,{title:"Enregistrer",children:e.jsx(w,{onClick:()=>fe(r.IDFORMATIONM),size:"small",sx:{color:"#4caf50",bgcolor:t("#4caf50",.1),"&:hover":{bgcolor:t("#4caf50",.2)}},children:e.jsx(Ge,{fontSize:"small"})})}),e.jsx(G,{title:"Annuler",children:e.jsx(w,{onClick:z,size:"small",sx:{color:"#f44336",bgcolor:t("#f44336",.1),"&:hover":{bgcolor:t("#f44336",.2)}},children:e.jsx(Ye,{fontSize:"small"})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{title:"Modifier",children:e.jsx(w,{onClick:()=>be(r.IDFORMATIONM),size:"small",sx:{color:"#ed6c02",bgcolor:t("#ed6c02",.1),"&:hover":{bgcolor:t("#ed6c02",.2)}},children:e.jsx(J,{fontSize:"small"})})}),e.jsx(G,{title:"Supprimer",children:e.jsx(w,{onClick:()=>ue(r.IDFORMATIONM,r.INTITULE),size:"small",sx:{color:"#f44336",bgcolor:t("#f44336",.1),"&:hover":{bgcolor:t("#f44336",.2)}},children:e.jsx(Ve,{fontSize:"small"})})})]})})]})]})]})})},r.IDFORMATIONM)})})})}),E&&P.length>0&&e.jsxs(i,{sx:{mt:3,p:2,bgcolor:t("#ed6c02",.02),borderRadius:2,border:"1px solid",borderColor:t("#ed6c02",.1),display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:2},children:[e.jsxs(i,{display:"flex",alignItems:"center",children:[e.jsx(He,{sx:{color:t("#ed6c02",.5),mr:1.5,fontSize:20}}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[P.length," formation(s) trouvÃ©e(s) â€¢ ",U?"Mode Ã©dition actif":"Cliquez sur Modifier pour Ã©diter"]})]}),U&&e.jsx(N,{size:"small",icon:e.jsx(J,{}),label:"Ã‰dition en cours",color:"warning",variant:"outlined"})]})]})})}),e.jsxs(Qe,{open:V.open,onClose:he,PaperProps:{sx:{borderRadius:3,p:1}},children:[e.jsxs(Xe,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_e,{color:"error"}),e.jsx(l,{variant:"h6",children:"Confirmer la suppression"})]}),e.jsx(qe,{children:e.jsxs(Ke,{children:["ÃŠtes-vous sÃ»r de vouloir supprimer la formation ",e.jsxs("strong",{children:['"',V.formationIntitule,'"']})," ? Cette action est irrÃ©versible."]})}),e.jsxs(Ze,{sx:{p:2,pt:0},children:[e.jsx(_,{onClick:he,variant:"outlined",sx:{borderRadius:2},children:"Annuler"}),e.jsx(_,{onClick:xe,variant:"contained",color:"error",sx:{borderRadius:2},children:"Supprimer"})]})]})]})};T(S);T(pe);const Ar=Ne(N)(({theme:m,active:d})=>({minWidth:40,justifyContent:"center",backgroundColor:d?t("#d32f2f",.1):"transparent",color:d?"#d32f2f":m.palette.text.secondary,borderColor:d?"#d32f2f":t("#000",.1),fontWeight:d?600:400,"&:hover":{backgroundColor:d?t("#d32f2f",.15):t("#000",.05)}})),Cr=Ne(N)(({theme:m,active:d})=>({minWidth:60,justifyContent:"center",backgroundColor:d?t("#d32f2f",.1):"transparent",color:d?"#d32f2f":m.palette.text.secondary,borderColor:d?"#d32f2f":t("#000",.1),fontWeight:d?600:400})),Tr=()=>{const[d,R]=x.useState([]),[Z,E]=x.useState([]),[Y,ie]=x.useState(""),[Q,M]=x.useState(""),[W,U]=x.useState([]),[k,F]=x.useState(null),[ee,se]=x.useState([]),[ae,re]=x.useState(""),[D,V]=x.useState(""),[te,L]=x.useState(!1),[B,ce]=x.useState(null),[H,P]=x.useState({open:!1,formationId:null,formationIntitule:""}),de=["JAN","FEV","MAR","AVR","MAI","JUI","JUL","AOU","SEP","OCT","NOV","DECE"],be=["Janvier","FÃ©vrier","Mars","Avril","Mai","Juin","Juillet","AoÃ»t","Septembre","Octobre","Novembre","DÃ©cembre"];x.useEffect(()=>{(async()=>{try{const h=localStorage.getItem("token"),v=await $.get("/listeplantrienal",{headers:{Authorization:`Bearer ${h}`}});E(v.data)}catch{f.error("Erreur lors de la rÃ©cupÃ©ration des triennaux.")}})()},[]),x.useEffect(()=>{(async()=>{if(Y){L(!0);try{const h=localStorage.getItem("token"),v=await $.get(`/listeformationspecialisationfonctionel?triennal=${Y}`,{headers:{Authorization:`Bearer ${h}`}});R(v.data);const b=Z.find(O=>O.IDPLAN===Y);if(b){const O=[b.ANNEE1,b.ANNEE2,b.ANNEE3].filter(Boolean);U(O)}}catch{f.error("Erreur lors de la rÃ©cupÃ©ration des formations.")}finally{L(!1)}}})()},[Y,Z]),x.useEffect(()=>{(async()=>{try{const h=localStorage.getItem("token"),v=await $.get("/listestructures",{headers:{Authorization:`Bearer ${h}`}});se(v.data)}catch(h){console.error("Erreur lors de la rÃ©cupÃ©ration des structures:",h)}})()},[]);const fe=n=>d.findIndex(h=>h.IDFORMATIONM===n),z=x.useCallback(n=>{ie(n.target.value),M("")},[]),q=x.useCallback(n=>{M(n.target.value)},[]),Ie=x.useCallback(n=>{F(n),ce(n),re("")},[]),oe=x.useCallback(()=>{F(null),ce(null),re("")},[]),ue=x.useCallback(async n=>{const h=fe(n);if(h===-1){f.error("Formation non trouvÃ©e.");return}try{const v=localStorage.getItem("token"),b=d[h];await $.patch("/modifierformations",b,{headers:{Authorization:`Bearer ${v}`}});const O=[...d];O[h]=b,R(O),F(null),ce(null),f.success("Modification enregistrÃ©e.")}catch{f.error("Erreur lors de l'enregistrement.")}},[d,""]),he=x.useCallback((n,h)=>{P({open:!0,formationId:n,formationIntitule:h})},[]),xe=x.useCallback(()=>{P({open:!1,formationId:null,formationIntitule:""})},[]),s=x.useCallback(async()=>{const{formationId:n}=H;try{const h=localStorage.getItem("token");await $.delete(`/supprimerformations/${n}`,{headers:{Authorization:`Bearer ${h}`}}),R(v=>v.filter(b=>b.IDFORMATIONM!==n)),f.success("Formation supprimÃ©e avec succÃ¨s.")}catch(h){f.error("Erreur lors de la suppression."),console.error(h)}finally{xe()}},[H,"",xe]),p=x.useCallback((n,h,v)=>{R(b=>{const O=[...b],ne=O.findIndex(ye=>ye.IDFORMATIONM===n);return ne===-1?(f.error("Formation non trouvÃ©e."),b):(O[ne][h]=v,O)})},[]),o=x.useCallback((n,h,v)=>{R(b=>{const O=[...b],ne=O.findIndex(y=>y.IDFORMATIONM===n);if(ne===-1)return f.error("Formation non trouvÃ©e."),b;const ye=O[ne];if(v){const y=parseInt(h.replace("ANNEE","")),K=W[y-1];ye[h]=K}else ye[h]=null;return O})},[W]),r=x.useCallback((n,h,v)=>{R(b=>{const O=[...b],ne=O.findIndex(y=>y.IDFORMATIONM===n);if(ne===-1)return f.error("Formation non trouvÃ©e."),b;const ye=de[h];return O[ne][ye]=v?1:null,O})},[]),c=x.useCallback((n,h)=>{R(v=>{const b=[...v],O=b.findIndex(ne=>ne.IDFORMATIONM===n);return O===-1?(f.error("Formation non trouvÃ©e."),v):(h?(b[O].IDSTRUCTUREBENEFICIAIRE=h.IDSTRUCTURE,b[O].STRUCTUREBENEFICIAIRE=h.NOMSTRUCTURE):(b[O].IDSTRUCTUREBENEFICIAIRE="",b[O].STRUCTUREBENEFICIAIRE=""),b)})},[]),a=n=>{ce(B===n?null:n)},u=n=>["ANNEE1","ANNEE2","ANNEE3"].filter((h,v)=>n[h]!==null&&n[h]!==0).map((h,v)=>W[v]).filter(Boolean),C=n=>de.filter(h=>n[h]===1),I=x.useMemo(()=>W.indexOf(Q),[W,Q]),j=x.useMemo(()=>{let n=d;if(d.find(h=>h.IDFORMATIONM===k),Q&&I!==-1){const h=`ANNEE${I+1}`;n=n.filter(v=>k===v.IDFORMATIONM?!0:v[h]!==null&&v[h]!==0)}if(D){const h=D.toLowerCase();n=n.filter(v=>k===v.IDFORMATIONM?!0:v.INTITULE&&v.INTITULE.toLowerCase().includes(h))}return n},[d,Q,I,D,k]);return e.jsxs(i,{sx:{width:"100%",minHeight:"100vh",bgcolor:"#f8faff",py:4},children:[e.jsx(Me,{position:"top-right",autoClose:3e3}),e.jsx(Fe,{maxWidth:"xl",children:e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(S,{elevation:0,sx:{p:{xs:3,md:4},borderRadius:4,background:"linear-gradient(145deg, #ffffff 0%, #f8faff 100%)",boxShadow:"0 10px 40px rgba(0,0,0,0.03)",border:"1px solid",borderColor:"rgba(211, 47, 47, 0.1)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #d32f2f, #f44336, #d32f2f)"}},children:[e.jsxs(i,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,flexWrap:"wrap",gap:2,children:[e.jsxs(i,{display:"flex",alignItems:"center",children:[e.jsx(le,{sx:{width:56,height:56,background:"linear-gradient(135deg, #d32f2f 0%, #f44336 100%)",boxShadow:"0 10px 20px rgba(211, 47, 47, 0.2)",mr:2},children:e.jsx(Re,{sx:{fontSize:28,color:"white"}})}),e.jsxs(i,{children:[e.jsx(l,{variant:"h5",fontWeight:"700",color:"#1a237e",children:"AXE 2: FORMATIONS PONCTUELLES"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"B. SpÃ©cialisation Fonctionnelle - Gestion et modification"})]})]}),e.jsx(N,{label:"Mode Ã©dition",color:"error",variant:"outlined",icon:e.jsx(J,{}),sx:{borderRadius:2}})]}),e.jsx(ge,{sx:{mb:3,borderColor:"rgba(211, 47, 47, 0.1)"}}),e.jsxs(g,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(g,{item:!0,xs:12,md:4,children:e.jsx(T.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},children:e.jsxs(S,{elevation:0,sx:{p:2,borderRadius:3,border:"1px solid",borderColor:"rgba(211, 47, 47, 0.1)",bgcolor:t("#d32f2f",.02)},children:[e.jsx(l,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,sx:{fontWeight:600},children:"ðŸ“… PLAN TRIENNAL"}),e.jsx(ve,{fullWidth:!0,size:"small",children:e.jsxs(Ae,{value:Y,onChange:z,displayEmpty:!0,sx:{borderRadius:2,bgcolor:"white"},children:[e.jsx(X,{value:"",disabled:!0,children:"SÃ©lectionner un plan"}),Z.map(n=>e.jsx(X,{value:n.IDPLAN,children:`${n.ANNEE1} - ${n.ANNEE2} - ${n.ANNEE3}`},n.IDPLAN))]})})]})})}),e.jsx(g,{item:!0,xs:12,md:4,children:e.jsx(T.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.25},children:e.jsxs(S,{elevation:0,sx:{p:2,borderRadius:3,border:"1px solid",borderColor:"rgba(211, 47, 47, 0.1)",bgcolor:t("#d32f2f",.02)},children:[e.jsx(l,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,sx:{fontWeight:600},children:"ðŸ“† ANNÃ‰E"}),e.jsx(ve,{fullWidth:!0,size:"small",children:e.jsxs(Ae,{value:Q,onChange:q,displayEmpty:!0,disabled:!Y,sx:{borderRadius:2,bgcolor:"white"},children:[e.jsx(X,{value:"",children:"Toutes les annÃ©es"}),W.map(n=>e.jsx(X,{value:n,children:n},n))]})})]})})}),e.jsx(g,{item:!0,xs:12,md:4,children:e.jsx(T.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3},children:e.jsxs(S,{elevation:0,sx:{p:2,borderRadius:3,border:"1px solid",borderColor:"rgba(211, 47, 47, 0.1)",bgcolor:t("#d32f2f",.02)},children:[e.jsx(l,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,sx:{fontWeight:600},children:"ðŸ” RECHERCHE"}),e.jsx(A,{placeholder:"Rechercher par intitulÃ©...",value:D,onChange:n=>V(n.target.value),fullWidth:!0,size:"small",InputProps:{startAdornment:e.jsx(me,{position:"start",children:e.jsx(De,{sx:{color:"#d32f2f"}})}),endAdornment:D&&e.jsx(me,{position:"end",children:e.jsx(w,{size:"small",onClick:()=>V(""),children:e.jsx(ze,{fontSize:"small"})})})},sx:{bgcolor:"white",borderRadius:2}})]})})})]}),!Y&&e.jsx(Se,{in:!0,children:e.jsx(ke,{severity:"info",sx:{mb:3,borderRadius:2,bgcolor:t("#d32f2f",.05),border:"1px solid",borderColor:t("#d32f2f",.2)},icon:e.jsx(je,{sx:{color:"#d32f2f"}}),children:"Veuillez sÃ©lectionner un plan triennal pour afficher les formations"})}),te&&e.jsx(i,{display:"flex",justifyContent:"center",alignItems:"center",py:8,children:e.jsx(We,{sx:{color:"#d32f2f"}})}),!te&&Y&&e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:j.length===0?e.jsxs(S,{sx:{p:6,textAlign:"center",bgcolor:t("#d32f2f",.02),borderRadius:3,border:"1px dashed",borderColor:t("#d32f2f",.3)},children:[e.jsx(Ue,{sx:{fontSize:48,color:t("#d32f2f",.3),mb:2}}),e.jsx(l,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Aucune formation trouvÃ©e"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:D?"Aucun rÃ©sultat pour votre recherche":"Aucune formation pour ce plan triennal"})]}):e.jsx(g,{container:!0,spacing:3,children:e.jsx(Le,{children:j.map((n,h)=>{const v=B===n.IDFORMATIONM,b=k===n.IDFORMATIONM,O=u(n),ne=C(n),ye=ee.find(y=>y.IDSTRUCTURE===n.IDSTRUCTUREBENEFICIAIRE)||null;return e.jsx(g,{item:!0,xs:12,md:6,lg:4,children:e.jsx(T.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{delay:h*.05},whileHover:{y:-4},children:e.jsxs(pe,{sx:{height:"100%",borderRadius:3,border:"1px solid",borderColor:b?t("#d32f2f",.5):O.length>0?t("#4caf50",.3):"rgba(0,0,0,0.08)",boxShadow:b?"0 8px 20px rgba(211, 47, 47, 0.15)":"0 4px 12px rgba(0,0,0,0.05)",transition:"all 0.3s ease",position:"relative",overflow:"visible",bgcolor:b?t("#d32f2f",.02):"white"},children:[b&&e.jsx(N,{size:"small",icon:e.jsx(J,{}),label:"Ã‰dition en cours",color:"error",sx:{position:"absolute",top:-10,right:10,zIndex:1,boxShadow:"0 4px 10px rgba(211, 47, 47, 0.3)"}}),e.jsxs(Oe,{sx:{p:3},children:[e.jsxs(i,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(le,{sx:{width:48,height:48,bgcolor:t("#d32f2f",.1),color:"#d32f2f",mr:2},children:e.jsx(ur,{})}),e.jsxs(i,{flex:1,children:[b?e.jsx(A,{value:n.INTITULE||"",onChange:y=>p(n.IDFORMATIONM,"INTITULE",y.target.value),size:"small",fullWidth:!0,placeholder:"IntitulÃ© de la formation",sx:{mb:1}}):e.jsx(l,{variant:"h6",fontWeight:"600",color:"#1a237e",children:n.INTITULE||"Sans intitulÃ©"}),e.jsxs(i,{display:"flex",gap:1,alignItems:"center",flexWrap:"wrap",children:[e.jsx(N,{size:"small",icon:e.jsx(je,{}),label:`ID: ${n.IDFORMATIONM}`,variant:"outlined",sx:{borderRadius:1.5}}),O.length>0&&e.jsx(N,{size:"small",label:`${O.length} annÃ©e(s)`,color:"success",sx:{borderRadius:1.5}}),ne.length>0&&e.jsx(N,{size:"small",label:`${ne.length} mois`,color:"info",sx:{borderRadius:1.5}})]})]})]}),e.jsxs(i,{sx:{mb:2,p:1.5,bgcolor:t("#d32f2f",.03),borderRadius:2},children:[e.jsxs(i,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1,children:[e.jsxs(i,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(rr,{fontSize:"small",sx:{color:"#d32f2f"}}),e.jsx(l,{variant:"caption",color:"text.secondary",children:"Structure bÃ©nÃ©ficiaire"})]}),n.IDSTRUCTUREBENEFICIAIRE&&!b&&e.jsx(N,{size:"small",label:n.IDSTRUCTUREBENEFICIAIRE,variant:"outlined",sx:{height:20}})]}),b?e.jsx(hr,{options:ee,getOptionLabel:y=>`${y.ABBREVIATION} - ${y.NOMSTRUCTURE}`,value:ye,onChange:(y,K)=>c(n.IDFORMATIONM,K),renderInput:y=>e.jsx(A,{...y,size:"small",placeholder:"Rechercher une structure",fullWidth:!0,sx:{bgcolor:"white"}}),renderOption:(y,K)=>e.jsx("li",{...y,children:e.jsxs(i,{children:[e.jsx(l,{variant:"body2",fontWeight:"500",children:K.ABBREVIATION}),e.jsx(l,{variant:"caption",color:"text.secondary",children:K.NOMSTRUCTURE})]})}),noOptionsText:"Aucune structure trouvÃ©e"}):e.jsx(l,{variant:"body2",sx:{mt:.5,fontWeight:500},children:n.STRUCTUREBENEFICIAIRE||"Non spÃ©cifiÃ©"})]}),e.jsxs(g,{container:!0,spacing:1.5,sx:{mb:2},children:[e.jsx(g,{item:!0,xs:6,children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Be,{sx:{fontSize:16,color:"text.secondary"}}),b?e.jsx(A,{value:n.CIBLES||"",onChange:y=>p(n.IDFORMATIONM,"CIBLES",y.target.value),size:"small",placeholder:"Cibles",fullWidth:!0}):e.jsx(l,{variant:"body2",color:"text.secondary",noWrap:!0,children:n.CIBLES||"Non spÃ©cifiÃ©"})]})}),e.jsx(g,{item:!0,xs:6,children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Pe,{sx:{fontSize:16,color:"text.secondary"}}),b?e.jsx(A,{value:n.LIEU||"",onChange:y=>p(n.IDFORMATIONM,"LIEU",y.target.value),size:"small",placeholder:"Lieu",fullWidth:!0}):e.jsx(l,{variant:"body2",color:"text.secondary",noWrap:!0,children:n.LIEU||"Non spÃ©cifiÃ©"})]})}),e.jsx(g,{item:!0,xs:6,children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(sr,{sx:{fontSize:16,color:"text.secondary"}}),b?e.jsx(A,{value:n.MONTANT||"",onChange:y=>p(n.IDFORMATIONM,"MONTANT",y.target.value),size:"small",placeholder:"Montant",type:"number",fullWidth:!0}):e.jsx(l,{variant:"body2",color:"text.secondary",noWrap:!0,children:n.MONTANT?`${n.MONTANT} FCFA`:"Non spÃ©cifiÃ©"})]})}),e.jsx(g,{item:!0,xs:6,children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(or,{sx:{fontSize:16,color:"text.secondary"}}),b?e.jsx(A,{value:n.PERIODE||"",onChange:y=>p(n.IDFORMATIONM,"PERIODE",y.target.value),size:"small",placeholder:"PÃ©riode",fullWidth:!0}):e.jsx(l,{variant:"body2",color:"text.secondary",noWrap:!0,children:n.PERIODE||"Non spÃ©cifiÃ©"})]})})]}),!v&&!b&&e.jsxs(i,{sx:{mb:2},children:[e.jsx(l,{variant:"caption",color:"text.secondary",gutterBottom:!0,display:"block",children:"Mois prÃ©vus:"}),e.jsx(i,{display:"flex",gap:.5,flexWrap:"wrap",sx:{mb:1.5},children:de.map(y=>e.jsx(Ar,{label:y,size:"small",active:n[y]===1,variant:n[y]===1?"filled":"outlined"},y))}),e.jsx(l,{variant:"caption",color:"text.secondary",gutterBottom:!0,display:"block",children:"AnnÃ©es prÃ©vues:"}),e.jsx(i,{display:"flex",gap:.5,flexWrap:"wrap",children:W.map((y,K)=>{const Ee=`ANNEE${K+1}`,er=n[Ee]!==null&&n[Ee]!==0;return e.jsx(Cr,{label:y,size:"small",active:er,variant:er?"filled":"outlined"},y)})})]}),e.jsx(we,{in:v||b,children:e.jsxs(i,{sx:{mt:2},children:[e.jsx(ge,{sx:{my:2}}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"error",gutterBottom:!0,children:"Objectifs pÃ©dagogiques"}),b?e.jsx(A,{value:n.OBJECTIFS||"",onChange:y=>p(n.IDFORMATIONM,"OBJECTIFS",y.target.value),size:"small",fullWidth:!0,multiline:!0,rows:2,placeholder:"Objectifs de la formation",sx:{mb:2}}):e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2,whiteSpace:"pre-wrap"},children:n.OBJECTIFS||"Aucun objectif renseignÃ©"}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"error",gutterBottom:!0,children:"RÃ©sultats attendus"}),b?e.jsx(A,{value:n.RESULTATATTENDU||"",onChange:y=>p(n.IDFORMATIONM,"RESULTATATTENDU",y.target.value),size:"small",fullWidth:!0,multiline:!0,rows:2,placeholder:"RÃ©sultats attendus",sx:{mb:2}}):e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2,whiteSpace:"pre-wrap"},children:n.RESULTATATTENDU||"Aucun rÃ©sultat renseignÃ©"}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"error",gutterBottom:!0,children:"Prestataire pÃ©dagogique"}),b?e.jsx(A,{value:n.PRESTATAIREPEDAGOGIQUE||"",onChange:y=>p(n.IDFORMATIONM,"PRESTATAIREPEDAGOGIQUE",y.target.value),size:"small",fullWidth:!0,placeholder:"Prestataire",sx:{mb:2}}):e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:n.PRESTATAIREPEDAGOGIQUE||"Non spÃ©cifiÃ©"}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"error",gutterBottom:!0,children:"Planification mensuelle"}),e.jsx(g,{container:!0,spacing:1,sx:{mb:2},children:be.map((y,K)=>e.jsx(g,{item:!0,xs:6,sm:4,children:e.jsx(Ce,{control:e.jsx(Te,{checked:n[de[K]]===1,onChange:Ee=>r(n.IDFORMATIONM,K,Ee.target.checked),disabled:!b,size:"small",sx:{color:t("#d32f2f",.5),"&.Mui-checked":{color:"#d32f2f"}}}),label:y,sx:{width:"100%","& .MuiTypography-root":{fontSize:"0.8rem"}}})},K))}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"error",gutterBottom:!0,children:"Planification annuelle"}),e.jsx(i,{sx:{mb:2},children:W.map((y,K)=>{const Ee=`ANNEE${K+1}`;return e.jsx(Ce,{control:e.jsx(Te,{checked:n[Ee]!==null&&n[Ee]!==0,onChange:er=>o(n.IDFORMATIONM,Ee,er.target.checked),disabled:!b,size:"small",sx:{color:t("#d32f2f",.5),"&.Mui-checked":{color:"#d32f2f"}}}),label:`AnnÃ©e ${K+1} : ${y}`,sx:{display:"block",mb:.5}},y)})})]})}),e.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mt:2},children:[e.jsx(i,{children:!b&&e.jsx(_,{size:"small",onClick:()=>a(n.IDFORMATIONM),endIcon:v?e.jsx($e,{}):e.jsx(Je,{}),sx:{textTransform:"none",color:"#d32f2f"},children:v?"Voir moins":"Voir plus"})}),e.jsx(i,{display:"flex",gap:1,children:b?e.jsxs(e.Fragment,{children:[e.jsx(G,{title:"Enregistrer",children:e.jsx(w,{onClick:()=>ue(n.IDFORMATIONM),size:"small",sx:{color:"#4caf50",bgcolor:t("#4caf50",.1),"&:hover":{bgcolor:t("#4caf50",.2)}},children:e.jsx(Ge,{fontSize:"small"})})}),e.jsx(G,{title:"Annuler",children:e.jsx(w,{onClick:oe,size:"small",sx:{color:"#f44336",bgcolor:t("#f44336",.1),"&:hover":{bgcolor:t("#f44336",.2)}},children:e.jsx(Ye,{fontSize:"small"})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{title:"Modifier",children:e.jsx(w,{onClick:()=>Ie(n.IDFORMATIONM),size:"small",sx:{color:"#d32f2f",bgcolor:t("#d32f2f",.1),"&:hover":{bgcolor:t("#d32f2f",.2)}},children:e.jsx(J,{fontSize:"small"})})}),e.jsx(G,{title:"Supprimer",children:e.jsx(w,{onClick:()=>he(n.IDFORMATIONM,n.INTITULE),size:"small",sx:{color:"#f44336",bgcolor:t("#f44336",.1),"&:hover":{bgcolor:t("#f44336",.2)}},children:e.jsx(Ve,{fontSize:"small"})})})]})})]})]})]})})},n.IDFORMATIONM)})})})}),Y&&j.length>0&&e.jsxs(i,{sx:{mt:3,p:2,bgcolor:t("#d32f2f",.02),borderRadius:2,border:"1px solid",borderColor:t("#d32f2f",.1),display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:2},children:[e.jsxs(i,{display:"flex",alignItems:"center",children:[e.jsx(He,{sx:{color:t("#d32f2f",.5),mr:1.5,fontSize:20}}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[j.length," formation(s) trouvÃ©e(s) â€¢ ",k?"Mode Ã©dition actif":"Cliquez sur Modifier pour Ã©diter"]})]}),k&&e.jsx(N,{size:"small",icon:e.jsx(J,{}),label:"Ã‰dition en cours",color:"error",variant:"outlined"})]})]})})}),e.jsxs(Qe,{open:H.open,onClose:xe,PaperProps:{sx:{borderRadius:3,p:1}},children:[e.jsxs(Xe,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_e,{color:"error"}),e.jsx(l,{variant:"h6",children:"Confirmer la suppression"})]}),e.jsx(qe,{children:e.jsxs(Ke,{children:["ÃŠtes-vous sÃ»r de vouloir supprimer la formation ",e.jsxs("strong",{children:['"',H.formationIntitule,'"']})," ? Cette action est irrÃ©versible."]})}),e.jsxs(Ze,{sx:{p:2,pt:0},children:[e.jsx(_,{onClick:xe,variant:"outlined",sx:{borderRadius:2},children:"Annuler"}),e.jsx(_,{onClick:s,variant:"contained",color:"error",sx:{borderRadius:2},children:"Supprimer"})]})]})]})};T(S);T(pe);const Nr=Ne(N)(({theme:m,active:d})=>({minWidth:40,justifyContent:"center",backgroundColor:d?t("#9c27b0",.1):"transparent",color:d?"#9c27b0":m.palette.text.secondary,borderColor:d?"#9c27b0":t("#000",.1),fontWeight:d?600:400,"&:hover":{backgroundColor:d?t("#9c27b0",.15):t("#000",.05)}})),Rr=()=>{const[m,d]=x.useState([]),[R,Z]=x.useState([]),[E,Y]=x.useState(""),[ie,Q]=x.useState(""),[M,W]=x.useState([]),[U,k]=x.useState(null),[F,ee]=x.useState(""),[se,ae]=x.useState(!1),[re,D]=x.useState(null),[V,te]=x.useState({open:!1,formationId:null,formationIntitule:""}),L="",B=["JAN","FEV","MAR","AVR","MAI","JUI","JUL","AOU","SEP","OCT","NOV","DECE"],ce=["Janvier","FÃ©vrier","Mars","Avril","Mai","Juin","Juillet","AoÃ»t","Septembre","Octobre","Novembre","DÃ©cembre"];x.useEffect(()=>{(async()=>{const p=localStorage.getItem("token");try{const o=await $.get(`${L}/listeplantrienal`,{headers:{Authorization:`Bearer ${p}`}});Z(o.data)}catch(o){console.error("Erreur lors de la rÃ©cupÃ©ration des triennaux:",o),f.error("Erreur lors de la rÃ©cupÃ©ration des triennaux.")}})()},[]),x.useEffect(()=>{E?(async()=>{if(!E)return;ae(!0);const p=localStorage.getItem("token");try{const o=await $.get(`${L}/listeformationindividuelle?triennal=${E}`,{headers:{Authorization:`Bearer ${p}`}});d(o.data);const r=R.find(c=>c.IDPLAN===E);if(r){const c=[r.ANNEE1,r.ANNEE2,r.ANNEE3].filter(Boolean);W(c)}}catch(o){f.error("Erreur lors de la rÃ©cupÃ©ration des formations."),console.error("Erreur lors de la rÃ©cupÃ©ration des formations:",o)}finally{ae(!1)}})():d([])},[E,R]);const H=m.filter(s=>F?(s.INTITULE||"").toLowerCase().includes(F.toLowerCase()):!0),P=s=>m.findIndex(p=>p.IDFORMATIONM===s),de=s=>{k(s),D(s)},be=async s=>{const p=localStorage.getItem("token"),o=P(s);if(o===-1){f.error("Formation non trouvÃ©e.");return}const r=m[o];try{await $.patch(`${L}/modifierformations`,r,{headers:{Authorization:`Bearer ${p}`}});const c=[...m];c[o]=r,d(c),k(null),D(null),f.success("Modification enregistrÃ©e avec succÃ¨s.")}catch(c){console.error("Erreur lors de la mise Ã  jour de la formation:",c),f.error("Erreur lors de l'enregistrement des modifications.")}},fe=()=>{k(null),D(null)},z=(s,p,o)=>{const r=P(s);if(r===-1){f.error("Formation non trouvÃ©e.");return}const c=[...m];c[r][p]=o,d(c)},q=(s,p,o)=>{const r=P(s);if(r===-1){f.error("Formation non trouvÃ©e.");return}const c=[...m],a=B[p];c[r][a]=o?1:null,d(c)},Ie=(s,p)=>{te({open:!0,formationId:s,formationIntitule:p})},oe=()=>{te({open:!1,formationId:null,formationIntitule:""})},ue=async()=>{const{formationId:s}=V,p=localStorage.getItem("token");try{await $.delete(`${L}/supprimerformation`,{headers:{Authorization:`Bearer ${p}`},data:{id:s}}),d(m.filter(o=>o.IDFORMATIONM!==s)),f.success("Formation supprimÃ©e avec succÃ¨s.")}catch(o){console.error("Erreur lors de la suppression de la formation:",o),f.error("Erreur lors de la suppression de la formation.")}finally{oe()}},he=s=>{D(re===s?null:s)},xe=s=>B.filter(p=>s[p]===1);return e.jsxs(i,{sx:{width:"100%",minHeight:"100vh",bgcolor:"#f8faff",py:4},children:[e.jsx(Me,{position:"top-right",autoClose:3e3}),e.jsx(Fe,{maxWidth:"xl",children:e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(S,{elevation:0,sx:{p:{xs:3,md:4},borderRadius:4,background:"linear-gradient(145deg, #ffffff 0%, #f8faff 100%)",boxShadow:"0 10px 40px rgba(0,0,0,0.03)",border:"1px solid",borderColor:"rgba(156, 39, 176, 0.1)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #9c27b0, #ba68c8, #9c27b0)"}},children:[e.jsxs(i,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,flexWrap:"wrap",gap:2,children:[e.jsxs(i,{display:"flex",alignItems:"center",children:[e.jsx(le,{sx:{width:56,height:56,background:"linear-gradient(135deg, #9c27b0 0%, #ba68c8 100%)",boxShadow:"0 10px 20px rgba(156, 39, 176, 0.2)",mr:2},children:e.jsx(rr,{sx:{fontSize:28,color:"white"}})}),e.jsxs(i,{children:[e.jsx(l,{variant:"h5",fontWeight:"700",color:"#1a237e",children:"AXE 2: FORMATIONS PONCTUELLES"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"C. Formations Individuelles - Gestion et modification"})]})]}),e.jsx(N,{label:"Mode Ã©dition",color:"secondary",variant:"outlined",icon:e.jsx(J,{}),sx:{borderRadius:2}})]}),e.jsx(ge,{sx:{mb:3,borderColor:"rgba(156, 39, 176, 0.1)"}}),e.jsxs(g,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(T.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},children:e.jsxs(S,{elevation:0,sx:{p:2,borderRadius:3,border:"1px solid",borderColor:"rgba(156, 39, 176, 0.1)",bgcolor:t("#9c27b0",.02)},children:[e.jsx(l,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,sx:{fontWeight:600},children:"ðŸ“… PLAN TRIENNAL"}),e.jsx(ve,{fullWidth:!0,size:"small",children:e.jsxs(Ae,{value:E,onChange:s=>Y(s.target.value),displayEmpty:!0,sx:{borderRadius:2,bgcolor:"white"},children:[e.jsx(X,{value:"",disabled:!0,children:"SÃ©lectionner un plan"}),R.map(s=>e.jsx(X,{value:s.IDPLAN,children:`${s.ANNEE1} - ${s.ANNEE2} - ${s.ANNEE3}`},s.IDPLAN))]})})]})})}),e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(T.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3},children:e.jsxs(S,{elevation:0,sx:{p:2,borderRadius:3,border:"1px solid",borderColor:"rgba(156, 39, 176, 0.1)",bgcolor:t("#9c27b0",.02)},children:[e.jsx(l,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,sx:{fontWeight:600},children:"ðŸ” RECHERCHE"}),e.jsx(A,{placeholder:"Rechercher par modalitÃ©...",value:F,onChange:s=>ee(s.target.value),fullWidth:!0,size:"small",InputProps:{startAdornment:e.jsx(me,{position:"start",children:e.jsx(De,{sx:{color:"#9c27b0"}})}),endAdornment:F&&e.jsx(me,{position:"end",children:e.jsx(w,{size:"small",onClick:()=>ee(""),children:e.jsx(ze,{fontSize:"small"})})})},sx:{bgcolor:"white",borderRadius:2}})]})})})]}),!E&&e.jsx(Se,{in:!0,children:e.jsx(ke,{severity:"info",sx:{mb:3,borderRadius:2,bgcolor:t("#9c27b0",.05),border:"1px solid",borderColor:t("#9c27b0",.2)},icon:e.jsx(je,{sx:{color:"#9c27b0"}}),children:"Veuillez sÃ©lectionner un plan triennal pour afficher les formations"})}),se&&e.jsx(i,{display:"flex",justifyContent:"center",alignItems:"center",py:8,children:e.jsx(We,{sx:{color:"#9c27b0"}})}),!se&&E&&e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:H.length===0?e.jsxs(S,{sx:{p:6,textAlign:"center",bgcolor:t("#9c27b0",.02),borderRadius:3,border:"1px dashed",borderColor:t("#9c27b0",.3)},children:[e.jsx(Ue,{sx:{fontSize:48,color:t("#9c27b0",.3),mb:2}}),e.jsx(l,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Aucune formation trouvÃ©e"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:F?"Aucun rÃ©sultat pour votre recherche":"Aucune formation pour ce plan triennal"})]}):e.jsx(g,{container:!0,spacing:3,children:e.jsx(Le,{children:H.map((s,p)=>{const o=re===s.IDFORMATIONM,r=U===s.IDFORMATIONM,c=xe(s);return e.jsx(g,{item:!0,xs:12,md:6,lg:4,children:e.jsx(T.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{delay:p*.05},whileHover:{y:-4},children:e.jsxs(pe,{sx:{height:"100%",borderRadius:3,border:"1px solid",borderColor:r?t("#9c27b0",.5):c.length>0?t("#4caf50",.3):"rgba(0,0,0,0.08)",boxShadow:r?"0 8px 20px rgba(156, 39, 176, 0.15)":"0 4px 12px rgba(0,0,0,0.05)",transition:"all 0.3s ease",position:"relative",overflow:"visible",bgcolor:r?t("#9c27b0",.02):"white"},children:[r&&e.jsx(N,{size:"small",icon:e.jsx(J,{}),label:"Ã‰dition en cours",color:"secondary",sx:{position:"absolute",top:-10,right:10,zIndex:1,boxShadow:"0 4px 10px rgba(156, 39, 176, 0.3)"}}),e.jsxs(Oe,{sx:{p:3},children:[e.jsxs(i,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(le,{sx:{width:48,height:48,bgcolor:t("#9c27b0",.1),color:"#9c27b0",mr:2},children:e.jsx(rr,{})}),e.jsxs(i,{flex:1,children:[r?e.jsx(A,{value:s.INTITULE||"",onChange:a=>z(s.IDFORMATIONM,"INTITULE",a.target.value),size:"small",fullWidth:!0,placeholder:"ModalitÃ© de la formation",sx:{mb:1}}):e.jsx(l,{variant:"h6",fontWeight:"600",color:"#1a237e",children:s.INTITULE||"Sans modalitÃ©"}),e.jsxs(i,{display:"flex",gap:1,alignItems:"center",flexWrap:"wrap",children:[e.jsx(N,{size:"small",icon:e.jsx(je,{}),label:`ID: ${s.IDFORMATIONM}`,variant:"outlined",sx:{borderRadius:1.5}}),c.length>0&&e.jsx(N,{size:"small",label:`${c.length} mois`,color:"success",sx:{borderRadius:1.5}})]})]})]}),e.jsxs(g,{container:!0,spacing:1.5,sx:{mb:2},children:[e.jsx(g,{item:!0,xs:6,children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Be,{sx:{fontSize:16,color:"text.secondary"}}),r?e.jsx(A,{value:s.CIBLES||"",onChange:a=>z(s.IDFORMATIONM,"CIBLES",a.target.value),size:"small",placeholder:"Cibles",fullWidth:!0}):e.jsx(l,{variant:"body2",color:"text.secondary",noWrap:!0,children:s.CIBLES||"Non spÃ©cifiÃ©"})]})}),e.jsx(g,{item:!0,xs:6,children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Pe,{sx:{fontSize:16,color:"text.secondary"}}),r?e.jsx(A,{value:s.LIEU||"",onChange:a=>z(s.IDFORMATIONM,"LIEU",a.target.value),size:"small",placeholder:"Lieu",fullWidth:!0}):e.jsx(l,{variant:"body2",color:"text.secondary",noWrap:!0,children:s.LIEU||"Non spÃ©cifiÃ©"})]})})]}),!o&&!r&&e.jsxs(i,{sx:{mb:2},children:[e.jsx(l,{variant:"caption",color:"text.secondary",gutterBottom:!0,display:"block",children:"Mois prÃ©vus:"}),e.jsx(i,{display:"flex",gap:.5,flexWrap:"wrap",children:B.map(a=>e.jsx(Nr,{label:a,size:"small",active:s[a]===1,variant:s[a]===1?"filled":"outlined"},a))})]}),e.jsx(we,{in:o||r,children:e.jsxs(i,{sx:{mt:2},children:[e.jsx(ge,{sx:{my:2}}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"secondary",gutterBottom:!0,children:"Objectifs pÃ©dagogiques"}),r?e.jsx(A,{value:s.OBJECTIFS||"",onChange:a=>z(s.IDFORMATIONM,"OBJECTIFS",a.target.value),size:"small",fullWidth:!0,multiline:!0,rows:2,placeholder:"Objectifs de la formation",sx:{mb:2}}):e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2,whiteSpace:"pre-wrap"},children:s.OBJECTIFS||"Aucun objectif renseignÃ©"}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"secondary",gutterBottom:!0,children:"RÃ©sultats attendus"}),r?e.jsx(A,{value:s.RESULTATATTENDU||"",onChange:a=>z(s.IDFORMATIONM,"RESULTATATTENDU",a.target.value),size:"small",fullWidth:!0,multiline:!0,rows:2,placeholder:"RÃ©sultats attendus",sx:{mb:2}}):e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2,whiteSpace:"pre-wrap"},children:s.RESULTATATTENDU||"Aucun rÃ©sultat renseignÃ©"}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"secondary",gutterBottom:!0,children:"Prestataire pÃ©dagogique"}),r?e.jsx(A,{value:s.PRESTATAIREPEDAGOGIQUE||"",onChange:a=>z(s.IDFORMATIONM,"PRESTATAIREPEDAGOGIQUE",a.target.value),size:"small",fullWidth:!0,placeholder:"Prestataire",sx:{mb:2}}):e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:s.PRESTATAIREPEDAGOGIQUE||"Non spÃ©cifiÃ©"}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"secondary",gutterBottom:!0,children:"Planification mensuelle"}),e.jsx(g,{container:!0,spacing:1,sx:{mb:2},children:ce.map((a,u)=>e.jsx(g,{item:!0,xs:6,sm:4,children:e.jsx(Ce,{control:e.jsx(Te,{checked:s[B[u]]===1,onChange:C=>q(s.IDFORMATIONM,u,C.target.checked),disabled:!r,size:"small",sx:{color:t("#9c27b0",.5),"&.Mui-checked":{color:"#9c27b0"}}}),label:a,sx:{width:"100%","& .MuiTypography-root":{fontSize:"0.8rem"}}})},u))})]})}),e.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mt:2},children:[e.jsx(i,{children:!r&&e.jsx(_,{size:"small",onClick:()=>he(s.IDFORMATIONM),endIcon:o?e.jsx($e,{}):e.jsx(Je,{}),sx:{textTransform:"none",color:"#9c27b0"},children:o?"Voir moins":"Voir plus"})}),e.jsx(i,{display:"flex",gap:1,children:r?e.jsxs(e.Fragment,{children:[e.jsx(G,{title:"Enregistrer",children:e.jsx(w,{onClick:()=>be(s.IDFORMATIONM),size:"small",sx:{color:"#4caf50",bgcolor:t("#4caf50",.1),"&:hover":{bgcolor:t("#4caf50",.2)}},children:e.jsx(Ge,{fontSize:"small"})})}),e.jsx(G,{title:"Annuler",children:e.jsx(w,{onClick:fe,size:"small",sx:{color:"#f44336",bgcolor:t("#f44336",.1),"&:hover":{bgcolor:t("#f44336",.2)}},children:e.jsx(Ye,{fontSize:"small"})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{title:"Modifier",children:e.jsx(w,{onClick:()=>de(s.IDFORMATIONM),size:"small",sx:{color:"#9c27b0",bgcolor:t("#9c27b0",.1),"&:hover":{bgcolor:t("#9c27b0",.2)}},children:e.jsx(J,{fontSize:"small"})})}),e.jsx(G,{title:"Supprimer",children:e.jsx(w,{onClick:()=>Ie(s.IDFORMATIONM,s.INTITULE),size:"small",sx:{color:"#f44336",bgcolor:t("#f44336",.1),"&:hover":{bgcolor:t("#f44336",.2)}},children:e.jsx(Ve,{fontSize:"small"})})})]})})]})]})]})})},s.IDFORMATIONM)})})})}),E&&H.length>0&&e.jsxs(i,{sx:{mt:3,p:2,bgcolor:t("#9c27b0",.02),borderRadius:2,border:"1px solid",borderColor:t("#9c27b0",.1),display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:2},children:[e.jsxs(i,{display:"flex",alignItems:"center",children:[e.jsx(He,{sx:{color:t("#9c27b0",.5),mr:1.5,fontSize:20}}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[H.length," formation(s) trouvÃ©e(s) â€¢ ",U?"Mode Ã©dition actif":"Cliquez sur Modifier pour Ã©diter"]})]}),U&&e.jsx(N,{size:"small",icon:e.jsx(J,{}),label:"Ã‰dition en cours",color:"secondary",variant:"outlined"})]})]})})}),e.jsxs(Qe,{open:V.open,onClose:oe,PaperProps:{sx:{borderRadius:3,p:1}},children:[e.jsxs(Xe,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_e,{color:"error"}),e.jsx(l,{variant:"h6",children:"Confirmer la suppression"})]}),e.jsx(qe,{children:e.jsxs(Ke,{children:["ÃŠtes-vous sÃ»r de vouloir supprimer la formation ",e.jsxs("strong",{children:['"',V.formationIntitule,'"']})," ? Cette action est irrÃ©versible."]})}),e.jsxs(Ze,{sx:{p:2,pt:0},children:[e.jsx(_,{onClick:oe,variant:"outlined",sx:{borderRadius:2},children:"Annuler"}),e.jsx(_,{onClick:ue,variant:"contained",color:"error",sx:{borderRadius:2},children:"Supprimer"})]})]})]})};T(S);T(pe);const Mr=Ne(N)(({theme:m,active:d})=>({minWidth:40,justifyContent:"center",backgroundColor:d?t("#e65100",.1):"transparent",color:d?"#e65100":m.palette.text.secondary,borderColor:d?"#e65100":t("#000",.1),fontWeight:d?600:400,"&:hover":{backgroundColor:d?t("#e65100",.15):t("#000",.05)}})),Sr=Ne(N)(({theme:m,active:d})=>({minWidth:60,justifyContent:"center",backgroundColor:d?t("#e65100",.1):"transparent",color:d?"#e65100":m.palette.text.secondary,borderColor:d?"#e65100":t("#000",.1),fontWeight:d?600:400})),Or=()=>{const[m,d]=x.useState([]),[R,Z]=x.useState([]),[E,Y]=x.useState(""),[ie,Q]=x.useState(""),[M,W]=x.useState([]),[U,k]=x.useState(null),[F,ee]=x.useState(""),[se,ae]=x.useState(!1),[re,D]=x.useState(null),[V,te]=x.useState({open:!1,formationId:null,formationIntitule:""}),L="",B=["JAN","FEV","MAR","AVR","MAI","JUI","JUL","AOU","SEP","OCT","NOV","DECE"],ce=["Janvier","FÃ©vrier","Mars","Avril","Mai","Juin","Juillet","AoÃ»t","Septembre","Octobre","Novembre","DÃ©cembre"];x.useEffect(()=>{(async()=>{const r=localStorage.getItem("token");try{const c=await $.get(`${L}/listeplantrienal`,{headers:{Authorization:`Bearer ${r}`}});Z(c.data)}catch(c){console.error("Erreur lors de la rÃ©cupÃ©ration des triennaux:",c),f.error("Erreur lors de la rÃ©cupÃ©ration des triennaux.")}})()},[]),x.useEffect(()=>{E?(async()=>{if(!E)return;ae(!0);const r=localStorage.getItem("token");try{const c=await $.get(`${L}/listeautoformation?triennal=${E}`,{headers:{Authorization:`Bearer ${r}`}});d(c.data);const a=R.find(u=>u.IDPLAN===E);if(a){const u=[a.ANNEE1,a.ANNEE2,a.ANNEE3].filter(Boolean);W(u)}}catch(c){f.error("Erreur lors de la rÃ©cupÃ©ration des formations."),console.error("Erreur lors de la rÃ©cupÃ©ration des formations:",c)}finally{ae(!1)}})():d([])},[E,R]);const H=m.filter(o=>F?(o.INTITULE||"").toLowerCase().includes(F.toLowerCase()):!0),P=o=>m.findIndex(r=>r.IDFORMATIONM===o),de=o=>{k(o),D(o)},be=async o=>{const r=localStorage.getItem("token"),c=P(o);if(c===-1){f.error("Formation non trouvÃ©e.");return}const a=m[c];try{await $.patch(`${L}/modifierformations`,a,{headers:{Authorization:`Bearer ${r}`}});const u=[...m];u[c]=a,d(u),k(null),D(null),f.success("Modification enregistrÃ©e avec succÃ¨s.")}catch(u){console.error("Erreur lors de la mise Ã  jour de la formation:",u),f.error("Erreur lors de l'enregistrement des modifications.")}},fe=()=>{k(null),D(null)},z=(o,r,c)=>{const a=P(o);if(a===-1){f.error("Formation non trouvÃ©e.");return}const u=[...m];u[a][r]=c,d(u)},q=(o,r,c)=>{const a=P(o);if(a===-1){f.error("Formation non trouvÃ©e.");return}const u=[...m],C=B[r];u[a][C]=c?1:null,d(u)},Ie=(o,r,c)=>{const a=P(o);if(a===-1){f.error("Formation non trouvÃ©e.");return}const u=[...m],C=u[a];if(c){const I=parseInt(r.replace("ANNEE","")),j=M[I-1];C[r]=j}else C[r]=null;d(u)},oe=(o,r)=>{te({open:!0,formationId:o,formationIntitule:r})},ue=()=>{te({open:!1,formationId:null,formationIntitule:""})},he=async()=>{const{formationId:o}=V,r=localStorage.getItem("token");try{await $.delete(`${L}/supprimerformation`,{headers:{Authorization:`Bearer ${r}`},data:{id:o}}),d(m.filter(c=>c.IDFORMATIONM!==o)),f.success("Formation supprimÃ©e avec succÃ¨s.")}catch(c){console.error("Erreur lors de la suppression de la formation:",c),f.error("Erreur lors de la suppression de la formation.")}finally{ue()}},xe=o=>{D(re===o?null:o)},s=o=>B.filter(r=>o[r]===1),p=o=>["ANNEE1","ANNEE2","ANNEE3"].filter((r,c)=>o[r]!==null&&o[r]!==0).map((r,c)=>M[c]).filter(Boolean);return e.jsxs(i,{sx:{width:"100%",minHeight:"100vh",bgcolor:"#f8faff",py:4},children:[e.jsx(Me,{position:"top-right",autoClose:3e3}),e.jsx(Fe,{maxWidth:"xl",children:e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(S,{elevation:0,sx:{p:{xs:3,md:4},borderRadius:4,background:"linear-gradient(145deg, #ffffff 0%, #f8faff 100%)",boxShadow:"0 10px 40px rgba(0,0,0,0.03)",border:"1px solid",borderColor:"rgba(230, 81, 0, 0.1)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #e65100, #f57c00, #e65100)"}},children:[e.jsxs(i,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,flexWrap:"wrap",gap:2,children:[e.jsxs(i,{display:"flex",alignItems:"center",children:[e.jsx(le,{sx:{width:56,height:56,background:"linear-gradient(135deg, #e65100 0%, #f57c00 100%)",boxShadow:"0 10px 20px rgba(230, 81, 0, 0.2)",mr:2},children:e.jsx(tr,{sx:{fontSize:28,color:"white"}})}),e.jsxs(i,{children:[e.jsx(l,{variant:"h5",fontWeight:"700",color:"#1a237e",children:"AXE 3: AUTOFORMATION"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Gestion et modification des auto-formations"})]})]}),e.jsx(N,{label:"Mode Ã©dition",color:"warning",variant:"outlined",icon:e.jsx(J,{}),sx:{borderRadius:2}})]}),e.jsx(ge,{sx:{mb:3,borderColor:"rgba(230, 81, 0, 0.1)"}}),e.jsxs(g,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(g,{item:!0,xs:12,md:4,children:e.jsx(T.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},children:e.jsxs(S,{elevation:0,sx:{p:2,borderRadius:3,border:"1px solid",borderColor:"rgba(230, 81, 0, 0.1)",bgcolor:t("#e65100",.02)},children:[e.jsx(l,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,sx:{fontWeight:600},children:"ðŸ“… PLAN TRIENNAL"}),e.jsx(ve,{fullWidth:!0,size:"small",children:e.jsxs(Ae,{value:E,onChange:o=>{Y(o.target.value),Q("")},displayEmpty:!0,sx:{borderRadius:2,bgcolor:"white"},children:[e.jsx(X,{value:"",disabled:!0,children:"SÃ©lectionner un plan"}),R.map(o=>e.jsx(X,{value:o.IDPLAN,children:`${o.ANNEE1} - ${o.ANNEE2} - ${o.ANNEE3}`},o.IDPLAN))]})})]})})}),e.jsx(g,{item:!0,xs:12,md:4,children:e.jsx(T.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.25},children:e.jsxs(S,{elevation:0,sx:{p:2,borderRadius:3,border:"1px solid",borderColor:"rgba(230, 81, 0, 0.1)",bgcolor:t("#e65100",.02)},children:[e.jsx(l,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,sx:{fontWeight:600},children:"ðŸ“† ANNÃ‰E"}),e.jsx(ve,{fullWidth:!0,size:"small",children:e.jsxs(Ae,{value:ie,onChange:o=>Q(o.target.value),displayEmpty:!0,disabled:!E,sx:{borderRadius:2,bgcolor:"white"},children:[e.jsx(X,{value:"",children:"Toutes les annÃ©es"}),M.map(o=>e.jsx(X,{value:o,children:o},o))]})})]})})}),e.jsx(g,{item:!0,xs:12,md:4,children:e.jsx(T.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3},children:e.jsxs(S,{elevation:0,sx:{p:2,borderRadius:3,border:"1px solid",borderColor:"rgba(230, 81, 0, 0.1)",bgcolor:t("#e65100",.02)},children:[e.jsx(l,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,sx:{fontWeight:600},children:"ðŸ” RECHERCHE"}),e.jsx(A,{placeholder:"Rechercher par modalitÃ©...",value:F,onChange:o=>ee(o.target.value),fullWidth:!0,size:"small",InputProps:{startAdornment:e.jsx(me,{position:"start",children:e.jsx(De,{sx:{color:"#e65100"}})}),endAdornment:F&&e.jsx(me,{position:"end",children:e.jsx(w,{size:"small",onClick:()=>ee(""),children:e.jsx(ze,{fontSize:"small"})})})},sx:{bgcolor:"white",borderRadius:2}})]})})})]}),!E&&e.jsx(Se,{in:!0,children:e.jsx(ke,{severity:"info",sx:{mb:3,borderRadius:2,bgcolor:t("#e65100",.05),border:"1px solid",borderColor:t("#e65100",.2)},icon:e.jsx(je,{sx:{color:"#e65100"}}),children:"Veuillez sÃ©lectionner un plan triennal pour afficher les formations"})}),se&&e.jsx(i,{display:"flex",justifyContent:"center",alignItems:"center",py:8,children:e.jsx(We,{sx:{color:"#e65100"}})}),!se&&E&&e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:H.length===0?e.jsxs(S,{sx:{p:6,textAlign:"center",bgcolor:t("#e65100",.02),borderRadius:3,border:"1px dashed",borderColor:t("#e65100",.3)},children:[e.jsx(Ue,{sx:{fontSize:48,color:t("#e65100",.3),mb:2}}),e.jsx(l,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Aucune auto-formation trouvÃ©e"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:F?"Aucun rÃ©sultat pour votre recherche":"Aucune formation pour ce plan triennal"})]}):e.jsx(g,{container:!0,spacing:3,children:e.jsx(Le,{children:H.map((o,r)=>{const c=re===o.IDFORMATIONM,a=U===o.IDFORMATIONM,u=s(o),C=p(o);return e.jsx(g,{item:!0,xs:12,md:6,lg:4,children:e.jsx(T.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{delay:r*.05},whileHover:{y:-4},children:e.jsxs(pe,{sx:{height:"100%",borderRadius:3,border:"1px solid",borderColor:a?t("#e65100",.5):u.length>0?t("#4caf50",.3):"rgba(0,0,0,0.08)",boxShadow:a?"0 8px 20px rgba(230, 81, 0, 0.15)":"0 4px 12px rgba(0,0,0,0.05)",transition:"all 0.3s ease",position:"relative",overflow:"visible",bgcolor:a?t("#e65100",.02):"white"},children:[a&&e.jsx(N,{size:"small",icon:e.jsx(J,{}),label:"Ã‰dition en cours",color:"warning",sx:{position:"absolute",top:-10,right:10,zIndex:1,boxShadow:"0 4px 10px rgba(230, 81, 0, 0.3)"}}),e.jsxs(Oe,{sx:{p:3},children:[e.jsxs(i,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(le,{sx:{width:48,height:48,bgcolor:t("#e65100",.1),color:"#e65100",mr:2},children:e.jsx(tr,{})}),e.jsxs(i,{flex:1,children:[a?e.jsx(A,{value:o.INTITULE||"",onChange:I=>z(o.IDFORMATIONM,"INTITULE",I.target.value),size:"small",fullWidth:!0,placeholder:"ModalitÃ© de l'auto-formation",sx:{mb:1}}):e.jsx(l,{variant:"h6",fontWeight:"600",color:"#1a237e",children:o.INTITULE||"Sans modalitÃ©"}),e.jsxs(i,{display:"flex",gap:1,alignItems:"center",flexWrap:"wrap",children:[e.jsx(N,{size:"small",icon:e.jsx(je,{}),label:`ID: ${o.IDFORMATIONM}`,variant:"outlined",sx:{borderRadius:1.5}}),u.length>0&&e.jsx(N,{size:"small",label:`${u.length} mois`,color:"success",sx:{borderRadius:1.5}}),C.length>0&&e.jsx(N,{size:"small",label:`${C.length} annÃ©e(s)`,color:"info",sx:{borderRadius:1.5}})]})]})]}),e.jsxs(g,{container:!0,spacing:1.5,sx:{mb:2},children:[e.jsx(g,{item:!0,xs:6,children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Be,{sx:{fontSize:16,color:"text.secondary"}}),a?e.jsx(A,{value:o.CIBLES||"",onChange:I=>z(o.IDFORMATIONM,"CIBLES",I.target.value),size:"small",placeholder:"Cibles",fullWidth:!0}):e.jsx(l,{variant:"body2",color:"text.secondary",noWrap:!0,children:o.CIBLES||"Non spÃ©cifiÃ©"})]})}),e.jsx(g,{item:!0,xs:6,children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Pe,{sx:{fontSize:16,color:"text.secondary"}}),a?e.jsx(A,{value:o.LIEU||"",onChange:I=>z(o.IDFORMATIONM,"LIEU",I.target.value),size:"small",placeholder:"Lieu/Plateforme",fullWidth:!0}):e.jsx(l,{variant:"body2",color:"text.secondary",noWrap:!0,children:o.LIEU||"Non spÃ©cifiÃ©"})]})})]}),!c&&!a&&e.jsxs(i,{sx:{mb:2},children:[e.jsx(l,{variant:"caption",color:"text.secondary",gutterBottom:!0,display:"block",children:"Mois prÃ©vus:"}),e.jsx(i,{display:"flex",gap:.5,flexWrap:"wrap",sx:{mb:1.5},children:B.map(I=>e.jsx(Mr,{label:I,size:"small",active:o[I]===1,variant:o[I]===1?"filled":"outlined"},I))}),e.jsx(l,{variant:"caption",color:"text.secondary",gutterBottom:!0,display:"block",children:"AnnÃ©es prÃ©vues:"}),e.jsx(i,{display:"flex",gap:.5,flexWrap:"wrap",children:M.map((I,j)=>{const n=`ANNEE${j+1}`,h=o[n]!==null&&o[n]!==0;return e.jsx(Sr,{label:I,size:"small",active:h,variant:h?"filled":"outlined"},I)})})]}),e.jsx(we,{in:c||a,children:e.jsxs(i,{sx:{mt:2},children:[e.jsx(ge,{sx:{my:2}}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"warning",gutterBottom:!0,children:"Objectifs pÃ©dagogiques"}),a?e.jsx(A,{value:o.OBJECTIFS||"",onChange:I=>z(o.IDFORMATIONM,"OBJECTIFS",I.target.value),size:"small",fullWidth:!0,multiline:!0,rows:2,placeholder:"Objectifs de l'auto-formation",sx:{mb:2}}):e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2,whiteSpace:"pre-wrap"},children:o.OBJECTIFS||"Aucun objectif renseignÃ©"}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"warning",gutterBottom:!0,children:"RÃ©sultats attendus"}),a?e.jsx(A,{value:o.RESULTATATTENDU||"",onChange:I=>z(o.IDFORMATIONM,"RESULTATATTENDU",I.target.value),size:"small",fullWidth:!0,multiline:!0,rows:2,placeholder:"RÃ©sultats attendus",sx:{mb:2}}):e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2,whiteSpace:"pre-wrap"},children:o.RESULTATATTENDU||"Aucun rÃ©sultat renseignÃ©"}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"warning",gutterBottom:!0,children:"Ressources / Prestataire"}),a?e.jsx(A,{value:o.PRESTATAIREPEDAGOGIQUE||"",onChange:I=>z(o.IDFORMATIONM,"PRESTATAIREPEDAGOGIQUE",I.target.value),size:"small",fullWidth:!0,placeholder:"Ressources ou prestataire",sx:{mb:2}}):e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:o.PRESTATAIREPEDAGOGIQUE||"Non spÃ©cifiÃ©"}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"warning",gutterBottom:!0,children:"Planification mensuelle"}),e.jsx(g,{container:!0,spacing:1,sx:{mb:2},children:ce.map((I,j)=>e.jsx(g,{item:!0,xs:6,sm:4,children:e.jsx(Ce,{control:e.jsx(Te,{checked:o[B[j]]===1,onChange:n=>q(o.IDFORMATIONM,j,n.target.checked),disabled:!a,size:"small",sx:{color:t("#e65100",.5),"&.Mui-checked":{color:"#e65100"}}}),label:I,sx:{width:"100%","& .MuiTypography-root":{fontSize:"0.8rem"}}})},j))}),e.jsx(l,{variant:"subtitle2",fontWeight:"600",color:"warning",gutterBottom:!0,children:"Planification annuelle"}),e.jsx(i,{sx:{mb:2},children:M.map((I,j)=>{const n=`ANNEE${j+1}`;return e.jsx(Ce,{control:e.jsx(Te,{checked:o[n]!==null&&o[n]!==0,onChange:h=>Ie(o.IDFORMATIONM,n,h.target.checked),disabled:!a,size:"small",sx:{color:t("#e65100",.5),"&.Mui-checked":{color:"#e65100"}}}),label:`AnnÃ©e ${j+1} : ${I}`,sx:{display:"block",mb:.5}},I)})})]})}),e.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mt:2},children:[e.jsx(i,{children:!a&&e.jsx(_,{size:"small",onClick:()=>xe(o.IDFORMATIONM),endIcon:c?e.jsx($e,{}):e.jsx(Je,{}),sx:{textTransform:"none",color:"#e65100"},children:c?"Voir moins":"Voir plus"})}),e.jsx(i,{display:"flex",gap:1,children:a?e.jsxs(e.Fragment,{children:[e.jsx(G,{title:"Enregistrer",children:e.jsx(w,{onClick:()=>be(o.IDFORMATIONM),size:"small",sx:{color:"#4caf50",bgcolor:t("#4caf50",.1),"&:hover":{bgcolor:t("#4caf50",.2)}},children:e.jsx(Ge,{fontSize:"small"})})}),e.jsx(G,{title:"Annuler",children:e.jsx(w,{onClick:fe,size:"small",sx:{color:"#f44336",bgcolor:t("#f44336",.1),"&:hover":{bgcolor:t("#f44336",.2)}},children:e.jsx(Ye,{fontSize:"small"})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{title:"Modifier",children:e.jsx(w,{onClick:()=>de(o.IDFORMATIONM),size:"small",sx:{color:"#e65100",bgcolor:t("#e65100",.1),"&:hover":{bgcolor:t("#e65100",.2)}},children:e.jsx(J,{fontSize:"small"})})}),e.jsx(G,{title:"Supprimer",children:e.jsx(w,{onClick:()=>oe(o.IDFORMATIONM,o.INTITULE),size:"small",sx:{color:"#f44336",bgcolor:t("#f44336",.1),"&:hover":{bgcolor:t("#f44336",.2)}},children:e.jsx(Ve,{fontSize:"small"})})})]})})]})]})]})})},o.IDFORMATIONM)})})})}),E&&H.length>0&&e.jsxs(i,{sx:{mt:3,p:2,bgcolor:t("#e65100",.02),borderRadius:2,border:"1px solid",borderColor:t("#e65100",.1),display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:2},children:[e.jsxs(i,{display:"flex",alignItems:"center",children:[e.jsx(He,{sx:{color:t("#e65100",.5),mr:1.5,fontSize:20}}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[H.length," formation(s) trouvÃ©e(s) â€¢ ",U?"Mode Ã©dition actif":"Cliquez sur Modifier pour Ã©diter"]})]}),U&&e.jsx(N,{size:"small",icon:e.jsx(J,{}),label:"Ã‰dition en cours",color:"warning",variant:"outlined"})]})]})})}),e.jsxs(Qe,{open:V.open,onClose:ue,PaperProps:{sx:{borderRadius:3,p:1}},children:[e.jsxs(Xe,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_e,{color:"error"}),e.jsx(l,{variant:"h6",children:"Confirmer la suppression"})]}),e.jsx(qe,{children:e.jsxs(Ke,{children:["ÃŠtes-vous sÃ»r de vouloir supprimer l'auto-formation ",e.jsxs("strong",{children:['"',V.formationIntitule,'"']})," ? Cette action est irrÃ©versible."]})}),e.jsxs(Ze,{sx:{p:2,pt:0},children:[e.jsx(_,{onClick:ue,variant:"outlined",sx:{borderRadius:2},children:"Annuler"}),e.jsx(_,{onClick:he,variant:"contained",color:"error",sx:{borderRadius:2},children:"Supprimer"})]})]})]})},At=()=>{nr();const[m,d]=x.useState("home"),[R,Z]=x.useState(null),E=[{id:"planAnnuel",title:"Plan Annuel",icon:pr,color:"#1976d2",gradient:"linear-gradient(135deg, #1976d2 0%, #64b5f6 100%)",description:"Gestion du plan de formation annuel",component:e.jsx(cr,{})},{id:"centreExcellence",title:"Centre d'Excellence",icon:gr,color:"#2e7d32",gradient:"linear-gradient(135deg, #2e7d32 0%, #4caf50 100%)",description:"Formations de transition entre diffÃ©rents niveaux ou domaines",component:e.jsx(Ir,{})},{id:"formationTransversal",title:"Formations Transversales",icon:mr,color:"#ed6c02",gradient:"linear-gradient(135deg, #ed6c02 0%, #ff9800 100%)",description:"Formations multi-disciplinaires et compÃ©tences gÃ©nÃ©rales",component:e.jsx(vr,{})},{id:"specialisation",title:"SpÃ©cialisation Fonctionnelle",icon:jr,color:"#d32f2f",gradient:"linear-gradient(135deg, #d32f2f 0%, #f44336 100%)",description:"Formations spÃ©cialisÃ©es dans un domaine fonctionnel",component:e.jsx(Tr,{})},{id:"formationIndividuelles",title:"Formations Individuelles",icon:rr,color:"#9c27b0",gradient:"linear-gradient(135deg, #9c27b0 0%, #ba68c8 100%)",description:"Formations personnalisÃ©es selon les besoins individuels",component:e.jsx(Rr,{})},{id:"autoFormation",title:"Auto-Formation",icon:br,color:"#e65100",gradient:"linear-gradient(135deg, #e65100 0%, #f57c00 100%)",description:"Formations en autonomie et apprentissage individuel",component:e.jsx(Or,{})}],Y=M=>{const W=E.find(U=>U.id===M);d(M),Z(W)},ie=()=>{d("home"),Z(null)},Q=()=>m==="home"?null:E.find(W=>W.id===m)?.component;return e.jsxs(i,{sx:{width:"100%",minHeight:"100vh",bgcolor:"#f5f5f5",py:4},children:[e.jsx(Me,{position:"top-right",autoClose:3e3}),e.jsxs(Fe,{maxWidth:"xl",children:[e.jsx(Se,{in:!0,timeout:1e3,children:e.jsx(S,{elevation:0,sx:{p:4,mb:4,borderRadius:3,border:"1px solid",borderColor:"grey.200",background:"white"},children:e.jsxs(i,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(i,{display:"flex",alignItems:"center",children:m!=="home"&&R?e.jsxs(e.Fragment,{children:[e.jsx(le,{sx:{width:64,height:64,bgcolor:t(R.color,.1),color:R.color,mr:2},children:lr.createElement(R.icon,{sx:{fontSize:32}})}),e.jsxs(i,{children:[e.jsx(l,{variant:"h4",fontWeight:"bold",color:"#1a1a1a",children:R.title}),e.jsx(l,{variant:"body1",color:"text.secondary",children:R.description})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{sx:{width:64,height:64,bgcolor:t("#1976d2",.1),color:"#1976d2",mr:2},children:e.jsx(Re,{sx:{fontSize:32}})}),e.jsxs(i,{children:[e.jsx(l,{variant:"h4",fontWeight:"bold",color:"#1a1a1a",children:"Centre de Formation"}),e.jsx(l,{variant:"body1",color:"text.secondary",children:"SÃ©lectionnez un axe de formation pour commencer"})]})]})}),m!=="home"&&e.jsx(_,{variant:"outlined",onClick:ie,startIcon:e.jsx(dr,{}),sx:{borderRadius:2,textTransform:"none",px:3,py:1,borderColor:R?.color||"#1976d2",color:R?.color||"#1976d2","&:hover":{borderColor:R?.color||"#1565c0",bgcolor:t(R?.color||"#1976d2",.02)}},children:"Retour Ã  l'accueil"})]})})}),m==="home"?e.jsx(g,{container:!0,spacing:3,children:E.map((M,W)=>{const U=M.icon;return e.jsx(g,{item:!0,xs:12,sm:6,md:4,children:e.jsx(ir,{in:!0,timeout:(W+1)*300,children:e.jsx(pe,{sx:{height:"100%",borderRadius:3,border:"1px solid",borderColor:"grey.200",transition:"all 0.3s ease-in-out","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 24px rgba(0,0,0,0.1)",borderColor:t(M.color,.3)}},children:e.jsxs(xr,{onClick:()=>Y(M.id),sx:{height:"100%"},children:[e.jsx(i,{sx:{height:4,background:M.gradient}}),e.jsxs(Oe,{sx:{p:3},children:[e.jsxs(i,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(le,{sx:{width:48,height:48,bgcolor:t(M.color,.1),color:M.color,mr:2},children:e.jsx(U,{sx:{fontSize:24}})}),e.jsx(l,{variant:"h6",fontWeight:"600",color:"#1a1a1a",children:M.title})]}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2,minHeight:40},children:M.description}),e.jsx(i,{display:"flex",alignItems:"center",color:M.color,children:e.jsx(l,{variant:"body2",fontWeight:"500",children:"AccÃ©der"})})]})]})})})},M.id)})}):e.jsx(ar,{in:!0,children:e.jsx(S,{elevation:0,sx:{p:3,borderRadius:3,border:"1px solid",borderColor:"grey.200",background:"white"},children:Q()})})]})]})};export{At as default};
